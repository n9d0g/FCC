if (self.CavalryLogger) { CavalryLogger.start_js(["An7XY"]); }

__d("RTWebCallWindowOpener",["requireCond","cr:1099565"],(function(a,b,c,d,e,f){"use strict";e.exports=b("cr:1099565")}),null);
__d("ZenonCallInviteModel",["BaseEventEmitter","FBLogger","gkx"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this)||this;d.$ZenonCallInviteModel3=function(a){b("FBLogger")("rtc_www").info("Received cancel for: ",a.ringID);if(d.__currentRequest&&d.__currentRequest.model&&d.__currentRequest.model.ringID===a.ringID)switch(a.reason){case"hangup":d.__currentRequest.model=babelHelpers["extends"]({},d.__currentRequest.model,{type:"missed"});d.emit("callInvite",d.__currentRequest.model);break;default:d.dismiss();break}};d.$ZenonCallInviteModel2=function(a){var c;b("FBLogger")("rtc_www").info("Receiving ring: ",a.ringID);if(((c=d.__currentRequest)==null?void 0:(c=c.model)==null?void 0:c.type)==="ringing"){if(((c=d.__currentRequest)==null?void 0:(c=c.model)==null?void 0:c.ringID)!==a.ringID&&b("gkx")("1434282")){a.onDecline("InAnotherCall");b("FBLogger")("rtc_www").info("Sending InAnotherCall to ring: ",a.ringID,"Current ring: ",(c=d.__currentRequest)==null?void 0:(c=c.model)==null?void 0:c.ringID)}}else d.__currentRequest={model:{controllerParams:a.controllerParams,inviterID:a.inviterID,participants:a.otherParticipants,requestingVideo:a.requestingVideo,ringID:a.ringID,thread:a.thread,type:a.isClientPermissableRing?"ringing":"unsupported_browser"},ringPayload:a},d.emit("callInvite",d.__currentRequest.model),a.isClientPermissableRing||a.onDecline("VersionUnsupported")};d.__eventSource=c;d.__currentRequest=null;return d}var d=c.prototype;d.getCurrentInvite=function(){var a;return(a=(a=this.__currentRequest)==null?void 0:a.model)!=null?a:null};d.startListening=function(a){a=a.callsBlocked;this.__currentRequest&&this.dismiss();this.stopListening();a?this.__eventSource.addListener("incomingRing",this.$ZenonCallInviteModel1):(this.__eventSource.addListener("incomingRing",this.$ZenonCallInviteModel2),this.__eventSource.addListener("ringCancel",this.$ZenonCallInviteModel3))};d.stopListening=function(){this.__eventSource.removeAllListeners("incomingRing"),this.__eventSource.removeAllListeners("ringCancel"),this.__currentRequest=null};d.dismiss=function(){var a;b("FBLogger")("rtc_www").info("Dismissing ring: ",(a=this.__currentRequest)==null?void 0:(a=a.model)==null?void 0:a.ringID);this.__currentRequest=null;this.emit("callInvite",Object.freeze(null))};d.accept=function(a,c){var d=this.__currentRequest;if(d){var e;b("FBLogger")("rtc_www").info("Accepting ring: ",(e=d.model)==null?void 0:e.ringID);((e=d.model)==null?void 0:e.type)==="ringing"&&d.ringPayload.onAccept(a,c);this.dismiss()}};d.decline=function(a,c){a===void 0&&(a="IgnoreCall");var d=this.__currentRequest;if(d){var e;b("FBLogger")("rtc_www").info("Declining ring: ",(e=d.model)==null?void 0:e.ringID);d.ringPayload.onDecline(a,c);this.dismiss();return}};d.$ZenonCallInviteModel1=function(a){b("FBLogger")("rtc_www").info("Blocking ring: ",a.ringID),a.onDecline("IgnoreCall","CallsBlocked")};return c}(b("BaseEventEmitter"));e.exports=a}),null);
__d("delegateZenonCallInviteModel",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a.getCurrentInvite=b.getCurrentInvite.bind(b),a.startListening=b.startListening.bind(b),a.stopListening=b.stopListening.bind(b),a.dismiss=b.dismiss.bind(b),a.accept=b.accept.bind(b),a.decline=b.decline.bind(b),b.addListener("callInvite",function(b){a.emit("callInvite",b)})}e.exports=a}),null);
__d("ZenonCallWindowController",["Promise","FBLogger","ZenonCallWindowErrors"],(function(a,b,c,d,e,f){"use strict";var g=b("ZenonCallWindowErrors").OpeningAnotherCallError;a=function(){function a(a,b){var c=b.callWindowInitializerResource,d=b.callWindowOpener;b=b.uriBuilderResource;this.$2=null;this.$3=!1;this.$5=null;this.$1=a;this.$7=b;this.$4=c;this.$6=d}var c=a.prototype;c.initCall=function(a){var c=this;if(this.$3)throw new g();try{if(this.$2&&!this.$2.closed&&a.joinContext.type==="thread"&&this.$2.inCallWith===a.joinContext.thread.id){this.$2.focus();return[this.$2,b("Promise").resolve()]}}catch(a){b("FBLogger")("rtc_www").catching(a).warn("Failed to access inCallWith on call window")}var d=this.$6.openWindow(a);this.$2&&(this.$2.closed||this.$2.close(),this.$2=null);this.$2=d;this.$3=!0;return[d,b("Promise").all([this.$7.load(),this.$4.load()]).then(function(b){var d=b[0];b=b[1];c.$5===null&&(c.$5=new b(c.$1,new d(c.$1)));return c.$5.initCall(c.$2,a)})["finally"](function(){c.$3=!1})]};return a}();e.exports=a}),null);
__d("ZenonCallLogger",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){var c=this,d;this.$1=[];this.$2={sharedCallID:(d=a.serverInfoData)!=null?d:a.callID,localCallID:a.callID,peerID:a.peerID};b.forEach(function(b){return c.$1.push(new b(a))})}var b=a.prototype;b.log=function(a){this.$1.forEach(function(b){b.processEvent(a)})};b.getLogIdentifiers=function(){return this.$2};return a}();e.exports=a}),null);
__d("ZenonParentCallSummaryLogProcessor",["CurrentUser","FBRTCCallSummaryStore","ZenonCallSummary","ZenonDismissReason","gkx","pageID"],(function(a,b,c,d,e,f){"use strict";var g=b("ZenonDismissReason").ZenonDismissReason;a=function(){function a(a){this.$2=b("FBRTCCallSummaryStore").getInstance(),this.$3=a.protocol,this.$3==="mw"&&(a.peerID="MW_PEER_ID"),this.$1=new(b("ZenonCallSummary"))(a)}var c=a.prototype;c.$4=function(a){if(a!=null){a=a.deviceID;a=a==="mobile";this.$1.setIsPeerMobile(a)}};c.processEvent=function(a){switch(a.name){case"inviteResponded":this.$1.onInviteResponded();break;case"inviteReceived":this.$1.onInviteReceived();this.$4(a.remoteDeviceInfo);break;case"callEnded":this.$5(a);break;case"callAccepted":this.$1.onCallAccepted(a.trigger);this.$1.save(this.$2);break;case"popupOpened":this.$6(a);this.$1.save(this.$2);break}};c.$6=function(a){this.$1.setInitByPageID(b("pageID")),this.$1.setInitByAppID(b("CurrentUser").getAppID()),this.$1.onCallEnded(g.CLIENT_ERROR,!1,!0,a.isPopupBlocked?"PopupBlocked":"PopupPending"),this.$1.save(this.$2)};c.$5=function(a){if(this.$3==="mw"&&a.isRemoteEnded)return;var c=a.endCallReason,d=a.isRemoteEnded;a=a.endCallSubreason;var e=b("gkx")("1148995");if(!e&&c===g.OTHER_INSTANCE_HANDLED&&d)return;this.$1.onCallEnded(c,d,!1,a);this.$1.save(this.$2)};return a}();e.exports=a}),null);
__d("ZenonCollisionContext",[],(function(a,b,c,d,e,f){function a(a){var b=null;a.groupThreadID!=null?b={id:a.groupThreadID,type:2}:a.peerID!=null&&(b={id:a.peerID,type:1});return b}e.exports={getThreadIDAndTypeFromCollisionContext:a}}),null);
__d("ZenonParticipantState",[],(function(a,b,c,d,e,f){"use strict";b=Object.freeze({UNKNOWN:0,DISCONNECTED:1,NO_ANSWER:2,REJECTED:3,UNREACHABLE:4,CONNECTION_DROPPED:5,CONTACTING:6,RINGING:7,NEGOTIATING:8,CONNECTING:9,CONNECTED:10,PARTICIPANT_LIMIT_REACHED:11,IN_ANOTHER_CALL:12,RING_TYPE_UNSUPPORTED:13});function a(a){return a==null?"disconnected":g[a]}var g=Object.freeze((c={},c[b.UNKNOWN]="disconnected",c[b.DISCONNECTED]="disconnected",c[b.NO_ANSWER]="disconnected",c[b.REJECTED]="disconnected",c[b.UNREACHABLE]="disconnected",c[b.CONNECTION_DROPPED]="disconnected",c[b.CONTACTING]="contacting",c[b.RINGING]="ringing",c[b.NEGOTIATING]="connecting",c[b.CONNECTING]="connecting",c[b.CONNECTED]="connected",c[b.PARTICIPANT_LIMIT_REACHED]="disconnected",c[b.IN_ANOTHER_CALL]="disconnected",c[b.RING_TYPE_UNSUPPORTED]="disconnected",c));e.exports={ZenonParticipantState:b,toCallParticipantState:a}}),null);
__d("ZenonPlatformExperiments",["gkx","qex"],(function(a,b,c,d,e,f){"use strict";a={isZenonPlatform:function(){var a;return(a=b("qex")._("1298004"))!=null?a:!1},isMwpp:function(){return b("gkx")("1273355")}};e.exports=a}),null);
__d("multiway_Capability",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SUPPORT_AUDIO_DEPRECATED:0,SUPPORT_VIDEO_DEPRECATED:1,SUPPORT_EXPERIMENTS_IN_JOIN_RESPONSE:2,SUPPORT_NEW_PARTICIPANT_STATES:3,SUPPORT_SDP_RENEGOTIATION:4,SUPPORT_MWPP:5,REQUIRE_FULL_SDP_IN_SMU:6,SUPPORT_PRECONNECT:7})}),null);
__d("multiway_DeviceStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OK:0,NOT_SUPPORTED:1,IN_ANOTHER_CALL:10})}),null);
__d("multiway_DismissReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CALL_ENDED:0,ANSWERED_ON_ANOTHER_DEVICE:1,IN_ANOTHER_CALL:2,CONNECTION_DROPPED:3,REJECTED_ON_ANOTHER_DEVICE:4,REMOVED_BY_PARTICIPANT:5,REJECTED_BY_CALLEE:6,INTERNAL_ERROR:7,CALL_ENDED_BY_PRODUCT:9,JOIN_APPROVAL_DENIED:10,JOIN_APPROVAL_TIMEDOUT:11})}),null);
__d("multiway_HangupReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({IGNORE_CALL:0,HANGUP_CALL:1,NO_ANSWER_TIMEOUT:2,CLIENT_ERROR:3,IN_ANOTHER_CALL:4,CLIENT_INTERRUPTED:5,SESSION_MIGRATED:6})}),null);
__d("multiway_MediaPauseStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NotPaused:0,Paused:1})}),null);
__d("multiway_MessageType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({JOIN:0,SERVER_MEDIA_UPDATE:1,HANGUP:2,ICE_CANDIDATE:3,RING:4,DISMISS:5,CONFERENCE_STATE:6,ADD_PARTICIPANTS:7,SUBSCRIPTION:8,CLIENT_MEDIA_UPDATE:9,DATA_MESSAGE:10,REMOVE_PARTICIPANTS:11,PING:18,P2P_PROTOCOL:19,UPDATE:20,NOTIFY:21,CONNECT:22,CLIENT_EVENT:23,UNSUBSCRIBE:25,APPROVAL:26})}),null);
__d("multiway_ParticipantCallState",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:0,DISCONNECTED:1,NO_ANSWER:2,REJECTED:3,UNREACHABLE:4,CONNECTION_DROPPED:5,CONTACTING:6,RINGING:7,CONNECTING:8,CONNECTED:9,PARTICIPANT_LIMIT_REACHED:10,IN_ANOTHER_CALL:11,RING_TYPE_UNSUPPORTED:12,PENDING_APPROVAL:13,APPROVED:14,FAILED_APPROVAL:15,HANGUP_IN_WAITING_ROOM:16})}),null);
__d("multiway_RingType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GROUP_AUDIO_CALL:0,PEER_VIDEO_CALL:1,PEER_AUDIO_CALL:2,GROUP_VIDEO_CALL:3,LIVE_STREAM:4,PEER_ESCALATED_VIDEO_CALL:5,PEER_ESCALATED_AUDIO_CALL:6})}),null);
__d("multiway_RtcResponseStatusCode",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OK:200,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,METHOD_NOT_ALLOWED:406,CONFLICT:409,CONDITIONAL_REQUEST_FAILED:412,SERVER_INTERNAL_ERROR:500,SERVICE_UNAVAILABLE:503})}),null);
__d("multiway_RtcResponseSubCode",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:1e3,EXCEEDED_MAX_ALLOWED_PARTICIPANTS:1001,MEMBERSHIP_CHECK_FAIL:1002,CONFERENCE_THROTTLED:1003,ENDPOINT_THROTTLED:1004,UNSUPPORTED_REQUEST_TYPE:2e3,CLIENT_REQUEST_UNACCEPTABLE:2001,CLIENT_RESPONSE_UNACCEPTABLE:2002,RING_RESPONSE_BODY_NOT_SET:2004,SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET:2005,INVALID_SDP:2006,INVALID_CONFERENCE_NAME:2007,SERVER_INFO_CONFERENCE_NAME_MISMATCH:2008,INVALID_USER_ID:2009,INCORRECT_VERSION_RANGE:2010,SENDER_ID_MISMATCH:2011,RECIPIENT_NOT_SPECIFIED:2012,FIELD_NOT_ALLOWED:2013,USERS_NOT_SPECIFIED:2015,REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE:2016,INVALID_CALL_ID:2017,SESSION_DESCRIPTION_ID_MISMATCH:2018,EMPTY_CLIENT_MEDIA_UPDATES:2019,INVALID_SERVER_INFO_DATA:2020,INCORRECT_STATE_VERSION:2021,MISMATCHED_STATE_FOR_VERSION:2022,INVALID_STATE_VERSION:2023,NO_RESOLVER_FOUND:2024,MISSING_APPROVERLIST:2025,FULL_SDP_REQUIRED_IN_APPROVED_STATE:2026,MISSING_BODY_ENDPOINT:2101,MISSING_BODY_HEADER:2102,MISSING_BODY_BODY:2103,MISSING_BODY_PARAMS:2104,MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST:2105,MISSING_BODY_DATA_MESSAGE_REQUEST:2106,MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST:2107,MISSING_BODY_ADD_PARTICIPANTS_REQUEST:2108,MISSING_BODY_SUBSCRIPTION_REQUEST:2110,MISSING_BODY_JOIN_REQUEST:2111,MISSING_BODY_HANGUP_REQUEST:2112,MISSING_BODY_ICE_CANDIDATE_REQUEST:2113,MISSING_BODY_P2P_MESSAGE_REQUEST:2114,MISSING_BODY_UPDATE_REQUEST:2115,MISSING_BODY_CLIENT_EVENT_REQUEST:2116,MISSING_BODY_CONNECT_REQUEST:2117,MISSING_BODY_UNSUBSCRIBE_REQUEST:2118,MISSING_BODY_APPROVAL_REQUEST:2119,MISSING_BODY_GENERIC:2199,REQUESTOR_NOT_MEMBER_CONFERENCE:3002,NOT_BROADCAST_OWNER:3003,GUEST_NOT_INVITED:3004,GUEST_DISCONNECTED:3005,GUEST_INVITATION_EXPIRED:3006,SHOULD_USE_NEW_SIGNALING_PATH:3007,PARTICIPANT_IN_PENDING_APPROVAL_STATE:3008,BROADCAST_ALREADY_STOPPED:4002,FAILED_TO_GENERATE_SDP_ANSWER:4003,FAILED_GENERATE_SESSION_DESCRIPTION:4004,SDP_SESSION_ID_MISMATCH:4005,MEDIA_ENDPOINT_GONE:4007,MEDIA_ENDPOINT_ALREADY_EXISTS:4008,MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID:4009,LEGACY_MESSENGER_SENDER_UNSET:4010,FAILED_TO_SET_TRANSPORT_INFO:4011,NON_PRIMARY_MULTIWAY_SERVER:4012,FAILED_TO_GET_REMOTE_DESCRIPTION:4013,LOCAL_DESCRIPTION_NOT_SET:4014,INVALID_SDP_TYPE:4015,CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO:4016,SDP_UNSET_ON_P2P_ANSWER:4017,MISSING_ICE_CANDIDATE_PAYLOAD:4018,P2P_PROTOCOL_UNSET:4019,CREATE_ACK_FOR_INVALID_MESSAGE_TYPE:4020,LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE:4021,CONNECT_UNSUPPORTED_IN_SFU_MODE:4022,CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS:4023,RESOLVE_STATE_API_ERROR:4024,EXTERNAL_RESOLUTION_ERROR:4025,INTERNAL_RESOLUTION_ERROR:4026,CONFERENCE_NOT_FOUND:5001,CONFERENCE_IS_TERMINATING:5002,CONFERENCE_IS_TERMINATED:5003,CONFERENCE_NAME_EMPTY:5004,NONCE_EMPTY:5005,NONCE_MISMATCH:5006,CONFERENCE_HAS_GONE:5007,PARTICIPANT_HAS_GONE:5008,MEDIA_SERVER_NOT_FOUND:5009,MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE:6001,CONFERENCE_INCAPABLE_RENEGOTIATION:6002,REJECTING_CMU_WHEN_SMU_PENDING:6003,PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC:6004,PARTICIPANT_ALREADY_IN_WAITING_ROOM:6005,PARTICIPANT_NOT_IN_PENDING_APPROVAL:6006,USER_NOT_APPROVER_FOR_TARGET_USER:6007,OK:9e3})}),null);
__d("ZenonMWMessageTypes",["multiway_Capability","multiway_DeviceStatus","multiway_DismissReason","multiway_HangupReason","multiway_MediaPauseStatus","multiway_ParticipantCallState","multiway_RingType","multiway_RtcResponseStatusCode","multiway_RtcResponseSubCode","multiway_MessageType"],(function(a,b,c,d,e,f){"use strict";e.exports={ZenonMWCapability:b("multiway_Capability"),ZenonMWDeviceStatus:b("multiway_DeviceStatus"),ZenonMWDismissReason:b("multiway_DismissReason"),ZenonMWHangupReason:b("multiway_HangupReason"),ZenonMWMediaPauseStatus:b("multiway_MediaPauseStatus"),ZenonMWParticipantCallState:b("multiway_ParticipantCallState"),ZenonMWRingType:b("multiway_RingType"),ZenonMWResponseStatusCode:b("multiway_RtcResponseStatusCode"),ZenonMWResponseSubCode:b("multiway_RtcResponseSubCode"),ZenonMWSignalingPayloadType:b("multiway_MessageType")}}),null);
__d("ZenonMWMessageMap",["ZenonMWMessageTypes"],(function(a,b,c,d,e,f){a=b("ZenonMWMessageTypes").ZenonMWSignalingPayloadType;e.exports=Object.freeze((c={},c[a.JOIN]="JOIN",c[a.SERVER_MEDIA_UPDATE]="SERVER_MEDIA_UPDATE",c[a.ICE_CANDIDATE]="ICE_CANDIDATE",c[a.HANGUP]="HANGUP",c[a.RING]="RING",c[a.DISMISS]="DISMISS",c[a.CONFERENCE_STATE]="CONFERENCE_STATE",c[a.ADD_PARTICIPANTS]="ADD_PARTICIPANTS",c[a.SUBSCRIPTION]="SUBSCRIPTION",c[a.CLIENT_MEDIA_UPDATE]="CLIENT_MEDIA_UPDATE",c[a.DATA_MESSAGE]="DATA_MESSAGE",c[a.REMOVE_PARTICIPANTS]="REMOVE_PARTICIPANTS",c[a.PING]="PING",c[a.P2P_PROTOCOL]="P2P_PROTOCOL",c[a.NOTIFY]="NOTIFY",c[a.CONNECT]="CONNECT",c[a.CLIENT_EVENT]="CLIENT_EVENT",c[a.UNSUBSCRIBE]="UNSUBSCRIBE",c))}),null);
__d("ZenonDebugLogger",["Log","LogHistory","ZenonMWMessageMap","ZenonMWMessageTypes","formatDate","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g=b("ZenonMWMessageTypes").ZenonMWSignalingPayloadType,h=null;a=function(){a.getInstance=function(){h||(h=new a());return h};function a(){this.$1=b("LogHistory").getInstance("webrtc")}var c=a.prototype;c.$2=function(a){var c=b("formatDate")(new Date(),"[H:i:s:X]",{skipPatternLocalization:!0});this.$1.log("Console",c+" "+a)};c.logStateMachine=function(a,b,c,d){a=d==null?a:a+": "+d;d="["+a+"] [Current State: "+b+"] Processing event: "+c;this.$2(d)};c.logMWMessage=function(a,c){if(c.jsonPayload==null)return;var d=c.jsonPayload.header,e=b("ZenonMWMessageMap")[d.type];a="[ms] "+a+" "+e+" [messageID: "+d.transactionId+" retryCount: "+d.retryCount+"]";this.$2(a);this.logMWMessageDetails(c)};c.logMWMessageDetails=function(a){if(a.jsonPayload==null){b("recoverableViolation")("Should never call logMWMessageDetails with a null jsonPayload message","rtc_www");return}a=a.jsonPayload;var c=a.header;a=a.body;var d=b("ZenonMWMessageMap")[c.type],e=c.responseStatusCode!=null,f="";switch(c.type){case g.SERVER_MEDIA_UPDATE:if(e){f="[md] "+d+" resp [currentVersion: "+((c=(c=a.serverMediaUpdateResponse)==null?void 0:c.currentVersion)!=null?c:"")+"]";break}f="[md] "+d+" req [fromVersion: "+((c=(c=a.serverMediaUpdateRequest)==null?void 0:c.fromVersion)!=null?c:"")+" toVersion: "+((c=(c=a.serverMediaUpdateRequest)==null?void 0:c.toVersion)!=null?c:"")+"]";break;case g.CLIENT_MEDIA_UPDATE:if(e){f="[md] "+d+" resp [currentVersion: "+((e=(c=a.clientMediaUpdateResponse)==null?void 0:c.currentVersion)!=null?e:"")+"]";break}f="[md] "+d+" req [fromVersion: "+((e=(c=a.clientMediaUpdateRequest)==null?void 0:c.fromVersion)!=null?e:"")+" toVersion: "+((c=(d=a.clientMediaUpdateRequest)==null?void 0:d.toVersion)!=null?c:"")+"]";break;default:return}this.$2(f)};return a}();e.exports=a}),null);
__d("LazyLoadInstance",["promiseDone"],(function(a,b,c,d,e,f){"use strict";var g={NOT_READY:0,LOADING:1,READY:2};a=function(){function a(a,b){this.$1={instantiate:b,moduleReference:a,stage:g.NOT_READY}}var c=a.prototype;c.get=function(a){switch(this.$1.stage){case g.NOT_READY:b("promiseDone")(this.$2(this.$1),a);break;case g.LOADING:b("promiseDone")(this.$1.instancePromise,a);break;case g.READY:a(this.$1.instance);break}};c.getNow=function(){return this.$1.stage===g.READY?this.$1.instance:null};c.preload=function(){this.$1.stage===g.NOT_READY&&this.$2(this.$1)};c.$2=function(a){var b=this,c=a.instantiate;a=a.moduleReference;a=a.load().then(function(a){a=c(a);b.$1={instance:a,stage:g.READY};return a});this.$1={instancePromise:a,stage:g.LOADING};return a};return a}();e.exports=a}),null);
__d("ZenonOfferStorage",["CacheStorage"],(function(a,b,c,d,e,f){var g="localstorage",h="RTC_",i="offer",j="offer_msg",k={writePeerOfferToStorage:function(a,b){a=k.getStorage(a,j);k._storeData(a,i,b)},_storeData:function(a,b,c){c={__t:Date.now(),__d:c};a.set(b,c)},getStorage:function(a,c){return new(b("CacheStorage"))(g,""+h+a+"_"+c+"_")}};e.exports=k}),null);
__d("CallEndReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({IGNORE_CALL:"IgnoreCall",HANGUP_CALL:"HangupCall",IN_ANOTHER_CALL:"InAnotherCall",ACCEPT_AFTER_HANGUP:"CallEndAcceptAfterHangUp",NO_ANSWER_TIMEOUT:"NoAnswerTimeout",INCOMING_TIMEOUT:"IncomingTimeout",OTHER_INSTANCE_HANDLED:"OtherInstanceHandled",SIGNALING_MESSAGE_FAILED:"SignalingMessageFailed",CONNECTION_DROPPED:"ConnectionDropped",CLIENT_INTERRUPTED:"ClientInterrupted",WEBRTC_ERROR:"WebRTCError",CLIENT_ERROR:"ClientError",NO_PERMISSION:"NoPermission",OTHER_NOT_CAPABLE:"OtherNotCapable",NO_UI_ERROR:"NoUIShown",UNSUPPORTED_VERSION:"VersionUnsupported",CALLER_NOT_VISIBLE:"CallerNotVisible",CARRIER_BLOCKED:"CarrierBlocked",OTHER_CARRIER_BLOCKED:"OtherCarrierBlocked",CLIENT_ENCRYPTION_ERROR:"ClientEncryptionError"})}),null);
__d("WebrtcMessageType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OFFER:"offer",ANSWER:"answer",ICE_CANDIDATE:"ice_candidate",OK:"ok",HANG_UP:"hang_up",OTHER_DISMISS:"other_dismiss",MESSAGE_ACK:"msg_ack",PRANSWER:"pranswer",PING:"ping",PING_ACK:"ping_ack",ICE_RESTART_OFFER:"icerestart_offer",ICE_RESTART_ANSWER:"icerestart_answer",OFFER_ACK:"offer_ack",ANSWER_ACK:"answer_ack",SET_VIDEO:"set_video",ACK:"ack",INVALID:"invalid",OFFER_NACK:"offer_nack",NACK:"nack",VIDEO_REQUEST:"video_request",SDP_UPDATE:"sdp_update",SWITCH_TO_MULTIWAY:"switch_to_multiway",ON_HOLD:"on_hold",NEGOTIATE:"negotiate",RING:"ring",PR_OFFER_ACK:"pr_offer_ack",NOTIFY_MEDIA_STATE:"notify_media_state",CLIENT_REPORTED_EVENT:"client_reported_event"})}),null);
__d("ZenonP2PMessageTypes",["WebrtcMessageType","CallEndReason"],(function(a,b,c,d,e,f){e.exports={ZenonP2PSignalingPayloadType:b("WebrtcMessageType"),ZenonP2PCallEndReason:b("CallEndReason")}}),null);
__d("ZenonSignalingTypes",[],(function(a,b,c,d,e,f){a={OK:0,REJECTED_FROM_VERSION_DOES_NOT_MATCH:1};e.exports={ZenonRemoteSdpResponseStatus:a}}),null);
__d("ZenonParentSignalingClient",["ZenonDebugLogger","ZenonSignalingTypes","recoverableViolation","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g=b("ZenonSignalingTypes").ZenonRemoteSdpResponseStatus;a=function(){function a(a,c,d,e){var f=this;this.remoteSignalingID=null;this.$4="init";this.$6=null;this.$7=null;this.$8=function(){};this.$9=function(a,c,d){b("ZenonDebugLogger").getInstance().logStateMachine("ParentSignalingClient",f.$4,"received "+a.eventName,f.$1);switch(a.eventName){case"inviteRequest":f.$11(a,c,d);break;case"remoteSdpRequest":f.$12(a,c);break;case"terminateRequest":f.$13(a,c,d);break}};this.$1=a;this.$3=d;this.$5=e;this.$2=c;c.setReceiver(this.$9)}var c=a.prototype;c.setSignalingEventHandlers=function(a){if(this.$6!=null){b("recoverableViolation")("setSignalingEventHandlers should only be called once, to avoid accidentally losing handlers.","rtc_www");return}this.$6=a};c.setLoggingEventHandler=function(a){this.$8=a};c.getSignalingId=function(){return this.$1};c.sendDismiss=function(a){this.$4="terminated";a={eventName:"terminateRequest",reason:a,shouldInformPeer:!0,fromJoinResponse:!1};this.$10(a)};c.receiveMessage=function(a){this.$2.receiveMessage(a)};c.isTerminated=function(){return this.$4=="terminated"};c.sendAnswerIntent=function(){if(this.$4=="inviteAcknowledged"){this.$4="answered";var a={eventName:"answerIntentRequest"};this.$10(a)}else throw b("unrecoverableViolation")("sendAnswerIntent called in unexpected state "+this.$4,"rtc_www")};c.respondToInvite=function(a){if(this.$4=="inviteReceived"){if(this.$7==null)throw b("unrecoverableViolation")("respondToInvite called without inviteMessageId being populated first","rtc_www");this.$4="inviteAcknowledged";a={eventName:"inviteResponse",ackMessageId:this.$7,status:a};this.$10(a)}else throw b("unrecoverableViolation")("respondToInvite called in unexpected state "+this.$4,"rtc_www")};c.sendInvite=function(a,c){throw b("unrecoverableViolation")("sendInvite called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendSdp=function(a,c){throw b("unrecoverableViolation")("sendSdp called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendIceCandidate=function(a){throw b("unrecoverableViolation")("sendIceCandidate called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendMediaUpdate=function(a){throw b("unrecoverableViolation")("sendMediaUpdate called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendAddParticipantsMessage=function(a){throw b("unrecoverableViolation")("sendAddParticipantsMessage called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendClientInfo=function(a){throw b("unrecoverableViolation")("sendClientInfo called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.$10=function(a){b("ZenonDebugLogger").getInstance().logStateMachine("ParentSignalingClient",this.$4,"sending "+a.eventName,this.$1),this.$3.sendEvent(a)};c.$11=function(a,b,c){this.$4=="init"&&(this.$4="inviteReceived",this.$7=b,this.$5(a,c,this))};c.$13=function(a,b,c){if(this.$4!="terminated"){this.$4="terminated";c={eventName:"dismissResponse",ackMessageId:b};this.$3.sendEvent(c);this.$6&&this.$6.onDismissReceived&&this.$6.onDismissReceived(this.$1,a.reason)}};c.$12=function(a,b){b={eventName:"remoteSdpResponse",ackMessageId:b,type:a.sdp.type,acknowledgedVersion:a.sdp.version,negotiateType:a.negotiateType,status:g.OK};this.$3.sendEvent(b)};return a}();e.exports=a}),null);
__d("ZenonParentCallsManager",["BaseEventEmitter","JSResource","LazyLoadInstance","ZenonCallLogger","ZenonCollisionContext","ZenonDismissReason","ZenonOfferStorage","ZenonP2PMessageTypes","ZenonParentCallSummaryLogProcessor","ZenonParentSignalingClient","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g=b("ZenonCollisionContext").getThreadIDAndTypeFromCollisionContext,h=b("ZenonDismissReason").ZenonDismissReason,i=b("ZenonDismissReason").endCallToDismissReason,j=b("ZenonP2PMessageTypes").ZenonP2PSignalingPayloadType;a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this)||this;d.$ZenonParentCallsManager4=new Map();d.$ZenonParentCallsManager5=new Set();d.$ZenonParentCallsManager6=new Map();d.$ZenonParentCallsManager7=new Map();d.$ZenonParentCallsManager8=new Map();d.getRawP2PMessages=function(a){return(a=d.$ZenonParentCallsManager7.get(a))!=null?a:null};d.getMWRingRequest=function(a){return(a=d.$ZenonParentCallsManager6.get(a))!=null?a:null};d.onInviteReceived=function(a,b,c){var e=c.getSignalingId();c.setSignalingEventHandlers({onDismissReceived:d.onDismissReceived});var f=a.inviterID,h=a.otherParticipants,i=a.requestingVideo;a=a.roomInfo;var j="zenon_incoming_call_dialog",k=d.$ZenonParentCallsManager9({protocol:b,peerID:f,isCaller:!1,callTrigger:j,callID:e,isVideo:i});k.log({name:"inviteReceived"});j=d.$ZenonParentCallsManager3.isSupportedClientForProtocol(b);var l=j?"OK":"NOT_SUPPORTED";c.respondToInvite(l);k.log({name:"inviteResponded"});l={id:"0",type:2};if(a.context){var m;l=(m=g(a.context))!=null?m:l}l={ringID:e,inviterID:f,otherParticipants:h,requestingVideo:i,thread:l,isClientPermissableRing:j,onAccept:function(a,g){var h=g.isPopupBlocked;g=g.trigger;k.log({name:"callAccepted",trigger:g});d.$ZenonParentCallsManager11(f);c.sendAnswerIntent();d.$ZenonParentCallsManager10(a,{isVideo:i,protocol:b,isPopupBlocked:h,callTrigger:g,callID:e,peerID:f})},onDecline:function(a,b){b===void 0&&(b=null),d.onDecline(e,k,a,b)},controllerParams:{callContext:a.name,callID:e,serverInfoData:(h=(m=a.context)==null?void 0:m.serverInfoData)!=null?h:null,configuration:b}};d.emit("incomingRing",l)};d.onDismissReceived=function(a,b){var c=d.$ZenonParentCallsManager12(b);c={ringID:a,reason:c};d.emit("ringCancel",c);c=d.$ZenonParentCallsManager4.get(a);c!=null&&c.log({name:"callEnded",endCallReason:b,isRemoteEnded:!0})};d.$ZenonParentCallsManager3=c;d.$ZenonParentCallsManager2=new(b("LazyLoadInstance"))(b("JSResource")("ZenonSignalingParentTransport").__setRef("ZenonParentCallsManager"),function(a){a=new a();a.init(d.getRawP2PMessages,d.getMWRingRequest);return a});d.$ZenonParentCallsManager1=new(b("LazyLoadInstance"))(b("JSResource")("ZenonSignalingClientManager").__setRef("ZenonParentCallsManager"),function(a){return new a(b("ZenonParentSignalingClient"),d.onInviteReceived)});return d}var d=c.prototype;d.startOutgoingCallIntent=function(a,b){var c=b.peerID,d=b.callID,e=b.callTrigger,f=b.protocol,g=b.isVideo;this.$ZenonParentCallsManager9({peerID:c,callID:d,callTrigger:e,protocol:f,isCaller:!0,isVideo:g});this.$ZenonParentCallsManager10(a,b)};d.$ZenonParentCallsManager9=function(a){var c=a.callID,d=a.callTrigger,e=a.isCaller,f=a.peerID,g=a.protocol;a=a.isVideo;var h=this.$ZenonParentCallsManager4.get(c);!h?(h=new(b("ZenonCallLogger"))({callID:c,peerID:f,callTrigger:d,isCaller:e,protocol:g,isVideo:a},[b("ZenonParentCallSummaryLogProcessor")]),this.$ZenonParentCallsManager4.set(c,h)):b("recoverableViolation")("Call logger key collision in parentCallsManager for callID: "+c,"rtc_www");return h};d.$ZenonParentCallsManager10=function(a,b){var c=b.callID;b.isVideo;b=b.isPopupBlocked;this.$ZenonParentCallsManager2.get(function(b){b.verificationNonce=a});this.$ZenonParentCallsManager5.add(c);c=this.$ZenonParentCallsManager4.get(c);c!=null&&c.log({name:"popupOpened",isPopupBlocked:b})};d.initListeners=function(a){var b=this;for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e.subscribe(function(a){return b.onMessageReceived(a)},function(a){return b.onRawP2PMessageReceived(a)},function(a){return b.onRawMWMessageReceived(a)})}};d.onMessageReceived=function(a){var b=a.getHeader().signalingID;if(b!=null&&this.$ZenonParentCallsManager5.has(b))return;this.$ZenonParentCallsManager1.get(function(b){b.receiveMessage(a)})};d.onRawP2PMessageReceived=function(a){var b=String(a.from);if(a.msg_type!==j.OFFER){var c=this.$ZenonParentCallsManager7.get(b);c||(c=[],this.$ZenonParentCallsManager7.set(b,c));c.push(a)}else this.$ZenonParentCallsManager8.set(b,a)};d.onRawMWMessageReceived=function(a){var b=a.jsonPayload,c=b.header;b=b.body;b=b.ringRequest;if(b){b=c.conferenceName;this.$ZenonParentCallsManager6.set(b,a)}};d.onDecline=function(a,c,d,e){e===void 0&&(e=null),this.$ZenonParentCallsManager1.get(function(f){f=f.getSignalingClient(a);if(f){var g=i(d);d!=="NoAnswerTimeout"&&d!=="VersionUnsupported"&&e!=="CallsBlocked"&&f.sendDismiss(g);c.log({name:"callEnded",endCallReason:g,isRemoteEnded:!1,endCallSubreason:e})}else b("recoverableViolation")("signaling client should be defined","rtc_www")})};d.removeListeners=function(a){for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.unsubscribe()}};d.$ZenonParentCallsManager12=function(a){switch(a){case h.OTHER_INSTANCE_HANDLED:case h.ANSWERED_ON_ANOTHER_DEVICE:case h.REJECTED_ON_ANOTHER_DEVICE:return"other_dismiss";default:return"hangup"}};d.$ZenonParentCallsManager11=function(a){var c=this.$ZenonParentCallsManager8.get(a);c&&b("ZenonOfferStorage").writePeerOfferToStorage(a,c)};return c}(b("BaseEventEmitter"));e.exports=a}),null);
__d("ZenonSignalingMessage",[],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.getHeader=function(){return this.$1};b.getEvents=function(){return this.$2};b.setSignalingID=function(a){this.$1.signalingID=a};b.setRetryCount=function(a){this.$1.retryCount=a};return a}();e.exports=a}),null);
__d("ZenonMWTranslatorUtils",["ChannelClientID","CurrentUser","FacebookAppIDs","ZenonDismissReason","ZenonMWMessageTypes","ZenonParticipantState","ZenonSignalingTypes","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g=b("ZenonDismissReason").ZenonDismissReason,h=(a=b("ZenonMWMessageTypes")).ZenonMWDeviceStatus;c=a.ZenonMWDismissReason;var i=a.ZenonMWHangupReason,j=a.ZenonMWParticipantCallState,k=a.ZenonMWResponseStatusCode,l=a.ZenonMWResponseSubCode;d=b("ZenonParticipantState").ZenonParticipantState;f=b("ZenonSignalingTypes").ZenonRemoteSdpResponseStatus;var m={mwMessageHeaderToSignalingMessageHeader:function(a){var b=a.conferenceName,c=a.transactionId,d=a.clientSessionId,e=a.serverInfoData;d=d;var f={userID:"2"};c={messageID:c,roomInfo:{name:b},signalingID:d,protocol:"mw",userInfo:{userID:"1"},remoteInfo:f,retryCount:a.retryCount};e!=null&&(c.remoteSignalingID=e);return c},signalingMessageHeaderToMWHeader:function(a,b){var c=a.messageID,d=a.roomInfo,e=a.signalingID,f=a.remoteSignalingID;d={conferenceName:d.name,transactionId:c,retryCount:a.retryCount,type:b};e!=null&&(d.clientSessionId=e);f!=null&&(d.serverInfoData=f);return d},signalingMessageHeaderToMWResponseHeader:function(a,b,c){a=m.signalingMessageHeaderToMWHeader(a,b);a.responseStatusCode=(b=c)!=null?b:k.OK;return a},createMWMessage:function(a,c){var d={appId:m.getMWAppID(),deviceId:b("ChannelClientID").getID(),userId:b("CurrentUser").getID()};return{endpoint:d,jsonPayload:{body:c,header:a}}},getMWAppID:function(){return b("FacebookAppIDs").MQTT_WEB.toString()},getCollisionContextFromAppMessages:function(a){var b=null,c=null,d=null;a!=null&&a.forEach(function(a){a=(a=a.body)==null?void 0:a.genericMessage;if(a!=null&&a.topic==="collision_context_payload"){a=a.data;if(a!=null){var e;a=JSON.parse(a);b=(e=a.group_thread_id)!=null?e:null;c=(e=a.peer_id)!=null?e:null;d=(e=a.server_info_data)!=null?e:null}}});return{groupThreadID:b,peerID:c,serverInfoData:d}},fromMWDismissReason:function(a){a=o[a];return(a=a)!=null?a:g.CALL_ENDED},fromMWJoinResponseStatusToDismissReason:function(a,b){if(b===l.EXCEEDED_MAX_ALLOWED_PARTICIPANTS)return g.MAX_ALLOWED_PARTICIPANTS_REACHED;switch(a){case k.METHOD_NOT_ALLOWED:case k.UNAUTHORIZED:return g.NO_PERMISSION;case k.SERVICE_UNAVAILABLE:return g.SIGNALING_MESSAGE_FAILED;case k.OK:throw new Error("Response status code is OK; should not return a dismiss reason");default:return g.CLIENT_ERROR}},fromMWParticipantState:function(a){a=q[a];return(a=a)!=null?a:j.UNKNOWN},toMWHangupReason:function(a){a=p[a];return(a=a)!=null?a:i.HANGUP_CALL},toMWDeviceStatus:function(a){a=n[a];return(a=a)!=null?a:h.OK},toZenonMediaStates:function(a){var b={tracks:[],version:0};Object.keys(a.tracks).forEach(function(c){var d=a.tracks[c];c={trackID:c,userID:d.owner,enabled:d.enabled};b.tracks.push(c);b.version++});return b},toMWMediaStatus:function(a){var b={};a.tracks.forEach(function(a){b[a.trackID]=a.enabled});return b},toMWClientMediaStatus:function(a){var b={tracks:{}};a.tracks.forEach(function(a){b.tracks[a.trackID]={enabled:a.enabled,owner:a.userID}});return b},toMWResponseStatusCode:function(a){return r[a]},getSdpVersion:function(a){a=a.split("\n");if(a.length<2)throw b("unrecoverableViolation")("Expected SDP string with two or more lines, but got "+a.length,"rtc_www");a=a[1].trim();a=a.split(" ");if(a.length<3)throw b("unrecoverableViolation")("Session line should have at least 3 tokens, but got "+a.length,"rtc_www");a=parseInt(a[2],10);if(isNaN(a))throw b("unrecoverableViolation")("SDP version could not be parsed as number.","rtc_www");return a}},n={OK:h.OK,NOT_SUPPORTED:h.NOT_SUPPORTED,IN_ANOTHER_CALL:h.IN_ANOTHER_CALL},o=Object.freeze((a={},a[c.CALL_ENDED]=g.CALL_ENDED,a[c.ANSWERED_ON_ANOTHER_DEVICE]=g.ANSWERED_ON_ANOTHER_DEVICE,a[c.IN_ANOTHER_CALL]=g.IN_ANOTHER_CALL,a[c.CONNECTION_DROPPED]=g.CONNECTION_DROPPED,a[c.REJECTED_ON_ANOTHER_DEVICE]=g.REJECTED_ON_ANOTHER_DEVICE,a[c.REJECTED_BY_CALLEE]=g.REJECTED_BY_CALLEE,a[c.CALL_ENDED_BY_PRODUCT]=g.CALL_ENDED_BY_PRODUCT,a[c.INTERNAL_ERROR]=g.CLIENT_ERROR,a[c.REMOVED_BY_PARTICIPANT]=g.HANGUP_CALL,a)),p=Object.freeze((c={},c[g.IGNORE_CALL]=i.IGNORE_CALL,c[g.HANGUP_CALL]=i.HANGUP_CALL,c[g.NO_ANSWER_TIMEOUT]=i.NO_ANSWER_TIMEOUT,c[g.CLIENT_ERROR]=i.CLIENT_ERROR,c[g.IN_ANOTHER_CALL]=i.IN_ANOTHER_CALL,c[g.CLIENT_INTERRUPTED]=i.CLIENT_INTERRUPTED,c[g.SESSION_MIGRATED]=i.SESSION_MIGRATED,c)),q=Object.freeze((a={},a[j.UNKNOWN]=d.UNKNOWN,a[j.DISCONNECTED]=d.DISCONNECTED,a[j.NO_ANSWER]=d.NO_ANSWER,a[j.REJECTED]=d.REJECTED,a[j.UNREACHABLE]=d.UNREACHABLE,a[j.CONNECTION_DROPPED]=d.CONNECTION_DROPPED,a[j.CONTACTING]=d.CONTACTING,a[j.RINGING]=d.RINGING,a[j.CONNECTING]=d.CONNECTING,a[j.CONNECTED]=d.CONNECTED,a[j.PARTICIPANT_LIMIT_REACHED]=d.PARTICIPANT_LIMIT_REACHED,a[j.IN_ANOTHER_CALL]=d.IN_ANOTHER_CALL,a[j.RING_TYPE_UNSUPPORTED]=d.RING_TYPE_UNSUPPORTED,a)),r=Object.freeze((c={},c[f.OK]=k.OK,c[f.REJECTED_FROM_VERSION_DOES_NOT_MATCH]=k.CONDITIONAL_REQUEST_FAILED,c));e.exports=m}),null);
__d("ZenonMWMessageTranslator",["ZenonMWMessageTypes","ZenonMWTranslatorUtils","ZenonPlatformExperiments","ZenonSignalingMessage"],(function(a,b,c,d,e,f){"use strict";var g=(a=b("ZenonMWMessageTypes")).ZenonMWCapability,h=a.ZenonMWResponseStatusCode,i=a.ZenonMWRingType,j=a.ZenonMWSignalingPayloadType,k="joining_context";c={toSignalingMessage:function(a){var c=a.jsonPayload.header,d=c.type,e=c.responseStatusCode==null;c=b("ZenonMWTranslatorUtils").mwMessageHeaderToSignalingMessageHeader(c);var f=[];switch(d){case j.RING:e&&(f=n(a));break;case j.DISMISS:e&&(f=o(a));break;case j.JOIN:e||(f=p(a));break;case j.ICE_CANDIDATE:e?f=q(a):f=r(a);break;case j.CONFERENCE_STATE:e&&(f=s(a));break;case j.CLIENT_MEDIA_UPDATE:e||(f=t(a));break;case j.SERVER_MEDIA_UPDATE:e&&(f=u(a));break;case j.PING:e||(f=l(a));break;case j.HANGUP:e||(f=m(a));break}return new(b("ZenonSignalingMessage"))(c,f)},toMWMessage:function(a){var c=a.getHeader();a=a.getEvents();if(a.length===0)throw new Error("Unexpected Translation: called toMWMessage with empty signaling events");else{var d=a[0];switch(d.eventName){case"addParticipantsRequest":return v(c,d);case"clientInfoRequest":if(a.length>=2&&a[1].eventName==="localSdpRequest"&&(a[1].sdp.type==="offer"||a[1].sdp.type==="answer"&&b("ZenonPlatformExperiments").isMwpp()))return y(c,d,a[1]);break;case"inviteRequest":if(a.length>=3&&a[1].eventName==="clientInfoRequest"&&a[2].eventName==="localSdpRequest"&&a[2].sdp.type==="offer")return y(c,a[1],a[2],d);break;case"inviteResponse":return z(c,d);case"dismissResponse":return B(c);case"initiateRenegotiationResponse":return G(c,d);case"iceCandidateRequest":return x(c,d);case"iceCandidateResponse":return w(c,d);case"mediaUpdateRequest":return E(c,d.mediaStates);case"participantUpdateResponse":return D(c,d);case"pingRequest":return C(c);case"remoteSdpResponse":return d.type==="offer"&&(a.length>=2&&a[1].eventName==="localSdpRequest"&&a[1].sdp.type==="answer")?F(c,d,a[1]):F(c,d);case"localSdpRequest":return E(c,d.mediaStates,d.sdp);case"terminateRequest":return A(c,d)}}return null}};function l(a){var b=[];a=a.jsonPayload.header;a={eventName:"pingResponse",ackMessageId:a.transactionId};b.push(a);return b}function m(a){var b=[];a=a.jsonPayload.header;a={eventName:"hangupResponse",ackMessageId:a.transactionId};b.push(a);return b}function n(a){var c=[];a=a.jsonPayload;var d=a.header;a=a.body;a=a.ringRequest;if(a){var e=a.otherParticipants,f=a.caller,g=a.ringType,h=a.appMessages;f=f;g=g===i.PEER_VIDEO_CALL||g===i.GROUP_VIDEO_CALL||g===i.LIVE_STREAM||g===i.PEER_ESCALATED_AUDIO_CALL;d=d.conferenceName;h=b("ZenonMWTranslatorUtils").getCollisionContextFromAppMessages(h);d={eventName:"inviteRequest",roomInfo:{name:d,context:h},inviterID:f,otherParticipants:e,isRemoteOfferer:!1,requestingVideo:g};c.push(d);e=(f=(h=a.offer)==null?void 0:h.sdpString)!=null?f:"";d=(g=a.mediaStatusEx)!=null?g:null;if(e!=""&&d!=null&&b("ZenonPlatformExperiments").isMwpp()){h={sdp:e,type:"offer",version:b("ZenonMWTranslatorUtils").getSdpVersion(e)};f=b("ZenonMWTranslatorUtils").toZenonMediaStates(d);a={eventName:"remoteSdpRequest",sdp:h,mediaStates:f,negotiateType:!1};c.push(a)}}return c}function o(a){var c=[];a=a.jsonPayload.body.dismissRequest;if(a){a=a.reason;a={eventName:"terminateRequest",reason:b("ZenonMWTranslatorUtils").fromMWDismissReason(a),shouldInformPeer:!0,fromJoinResponse:!1};c.push(a)}return c}function p(a){var c=[],d=a.jsonPayload.header;if(d.responseStatusCode&&d.responseStatusCode!==h.OK){var e={eventName:"terminateRequest",reason:b("ZenonMWTranslatorUtils").fromMWJoinResponseStatusToDismissReason(d.responseStatusCode,d.responseSubCode),shouldInformPeer:!1,fromJoinResponse:!0};c.push(e);return c}e=a.jsonPayload.body.joinResponse;if(!e)return c;a={ackMessageId:d.transactionId,eventName:"localSdpResponse"};c.push(a);d=(a=(d=e.answer)==null?void 0:d.sdpString)!=null?a:"";if(d!==""){a={sdp:d,type:"answer",version:b("ZenonMWTranslatorUtils").getSdpVersion(d)};d=b("ZenonMWTranslatorUtils").toZenonMediaStates(e.mediaStatusEx);e={eventName:"remoteSdpRequest",sdp:a,mediaStates:d,negotiateType:!1};c.push(e)}a={eventName:"capabilitiesRequest",capabilities:{addParticipantEnabled:!0}};c.push(a);return c}function q(a){var b=[];a=a.jsonPayload.body.iceCandidateRequest;if(a){a={eventName:"iceCandidateRequest",iceCandidates:a.iceCandidateSdps.map(function(a){return{sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,candidateSdpString:(a=a.candidateSdpString)!=null?a:""}})};b.push(a)}return b}function r(a){var b=[];a=a.jsonPayload.header;a={ackMessageId:a.transactionId,eventName:"iceCandidateResponse"};b.push(a);return b}function s(a){var c=[];a=a.jsonPayload.body.conferenceStateRequest;if(a){var d=a.participantStates,e=a.appMessages,f={eventName:"participantUpdateRequest",participantStates:new Map(),versionId:a.version},g={eventName:"clientInfoRequest",userCapabilities:new Map()};Object.keys(d).forEach(function(a){var c=d[a],e=c.state;c=c.userCapabilities;f.participantStates.set(a,b("ZenonMWTranslatorUtils").fromMWParticipantState(e));g.userCapabilities.set(a,(e=c)!=null?e:"")});a=b("ZenonMWTranslatorUtils").getCollisionContextFromAppMessages(e);e={context:a,eventName:"roomContextUpdateRequest"};c.push(f);c.push(g);c.push(e)}return c}function t(a){var c=[];a=a.jsonPayload;var d=a.header;a=a.body;a=a.clientMediaUpdateResponse;if(a){var e=a.answer,f=a.mediaStatus;if(e!=null&&f!=null){e=(e=e.sdpString)!=null?e:"";f=b("ZenonMWTranslatorUtils").toZenonMediaStates(f);var g={ackMessageId:d.transactionId,eventName:"localSdpResponse"};f={eventName:"remoteSdpRequest",negotiateType:!1,mediaStates:f,sdp:{sdp:e,type:"answer",version:b("ZenonMWTranslatorUtils").getSdpVersion(e)}};c.push(g);c.push(f)}else{e={ackMessageId:d.transactionId,eventName:"mediaUpdateResponse",requestVersionId:a.currentVersion};c.push(e)}}return c}function u(a){var c=[];a=a.jsonPayload;var d=a.header;a=a.body;a=a.serverMediaUpdateRequest;if(!a)return c;d={eventName:"overlayConfigServerUpdateRequest",serializedConfig:(d=(d=d.extensions)==null?void 0:d.oc1)!=null?d:""};c.push(d);if(a.renegotiationRequested){d={eventName:"initiateRenegotiationRequest",version:a.toVersion,fromVersion:a.fromVersion};c.push(d)}d=(d=(d=a.answer)==null?void 0:d.sdpString)!=null?d:"";var e="answer";if(d===""){var f;d=(f=(f=a.offer)==null?void 0:f.sdpString)!=null?f:"";e="offer"}if(d==="")return c;f={sdp:d,type:e,version:b("ZenonMWTranslatorUtils").getSdpVersion(d)};e=b("ZenonMWTranslatorUtils").toZenonMediaStates(a.mediaStatus);d={eventName:"remoteSdpRequest",sdp:f,mediaStates:e,negotiateType:!1,fromVersion:a.fromVersion};c.push(d);return c}function v(a,c){c={usersToInvite:c.participants};a=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWHeader(a,j.ADD_PARTICIPANTS);return b("ZenonMWTranslatorUtils").createMWMessage(a,{addParticipantsRequest:c})}function w(a,c){c=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWResponseHeader(a,j.ICE_CANDIDATE);return b("ZenonMWTranslatorUtils").createMWMessage(c,{})}function x(a,c){c=c.iceCandidates;c=c.map(function(a){return{sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,candidateSdpString:a.candidateSdpString}});c={iceCandidateSdps:c};a=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWHeader(a,j.ICE_CANDIDATE);return b("ZenonMWTranslatorUtils").createMWMessage(a,{iceCandidateRequest:c})}function y(a,c,d,e){c={offer:{sdpString:d.sdp.sdp},deviceCapabilities:[g.SUPPORT_NEW_PARTICIPANT_STATES,g.REQUIRE_FULL_SDP_IN_SMU,g.SUPPORT_SDP_RENEGOTIATION],userCapabilities:c.userCapabilities.get(a.userInfo.userID),mediaStatus:b("ZenonMWTranslatorUtils").toMWMediaStatus(d.mediaStates)};b("ZenonPlatformExperiments").isMwpp()&&(c.deviceCapabilities.push(g.SUPPORT_MWPP),d.sdp.type==="answer"&&(c.answer={sdpString:d.sdp.sdp}));d=e==null?void 0:e.otherParticipants;d&&(c.usersToCall=d);e=(d=e==null?void 0:e.roomInfo.context)!=null?d:a.roomInfo.context;e&&(c.appMessages=[{header:{topic_DEPRECATED:k},body:{genericMessage:{topic:k,data:JSON.stringify(e)}}}]);d=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWHeader(a,j.JOIN);e&&e.serverInfoData!=null&&(d.serverInfoData=e.serverInfoData);return b("ZenonMWTranslatorUtils").createMWMessage(d,{joinRequest:c})}function z(a,c){c=c.status;c=b("ZenonMWTranslatorUtils").toMWDeviceStatus(c);c={deviceCapabilities:[g.SUPPORT_AUDIO_DEPRECATED,g.SUPPORT_VIDEO_DEPRECATED],deviceStatus:c};a=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWResponseHeader(a,j.RING);return b("ZenonMWTranslatorUtils").createMWMessage(a,{ringResponse:c})}function A(a,c){c=c.reason;c={reason:b("ZenonMWTranslatorUtils").toMWHangupReason(c),detailedReasonString:""};a=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWHeader(a,j.HANGUP);return b("ZenonMWTranslatorUtils").createMWMessage(a,{hangupRequest:c})}function B(a){a=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWResponseHeader(a,j.DISMISS);return b("ZenonMWTranslatorUtils").createMWMessage(a,{})}function C(a){var c=Object.freeze({});a=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWHeader(a,j.PING);return b("ZenonMWTranslatorUtils").createMWMessage(a,{pingRequest:c})}function D(a,c){c={currentVersion:c.requestVersionId};a=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWResponseHeader(a,j.CONFERENCE_STATE);return b("ZenonMWTranslatorUtils").createMWMessage(a,{conferenceStateResponse:c})}function E(a,c,d){c={fromVersion:c.version,mediaUpdates:[{mediaStatus:b("ZenonMWTranslatorUtils").toMWMediaStatus(c)}],toVersion:c.version};d!==void 0&&(c.offer={sdpString:d.sdp});d=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWHeader(a,j.CLIENT_MEDIA_UPDATE);return b("ZenonMWTranslatorUtils").createMWMessage(d,{clientMediaUpdateRequest:c})}function F(a,c,d){if(c.acknowledgedVersion==null)throw new Error("Error creating ServerMediaUpdateResponse: remoteSdpResponse.acknowledgedVersion is null");var e={currentVersion:c.acknowledgedVersion};d&&(e.answer={sdpString:d.sdp.sdp},e.mediaStatus=b("ZenonMWTranslatorUtils").toMWClientMediaStatus(d.mediaStates));d=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWResponseHeader(a,j.SERVER_MEDIA_UPDATE,b("ZenonMWTranslatorUtils").toMWResponseStatusCode(c.status));return b("ZenonMWTranslatorUtils").createMWMessage(d,{serverMediaUpdateResponse:e})}function G(a,c){var d={currentVersion:c.acknowledgedVersion};a=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWResponseHeader(a,j.SERVER_MEDIA_UPDATE,b("ZenonMWTranslatorUtils").toMWResponseStatusCode(c.status));return b("ZenonMWTranslatorUtils").createMWMessage(a,{serverMediaUpdateResponse:d})}e.exports=c}),null);
__d("ZenonP2PTranslatorUtils",["CurrentUser","ZenonDismissReason","ZenonP2PMessageTypes"],(function(a,b,c,d,e,f){"use strict";var g=b("ZenonDismissReason").ZenonDismissReason,h=b("ZenonP2PMessageTypes").ZenonP2PCallEndReason;a={p2pMessageToSignalingMessageHeader:function(a,c){var d=c.call_id,e=c.from;c=c.source;var f=e+":"+b("CurrentUser").getID();return{messageID:a,roomInfo:{name:f},remoteSignalingID:String(d),signalingID:String(d),protocol:"p2p",userInfo:{userID:b("CurrentUser").getID()},remoteInfo:{userID:e,deviceInfo:{deviceID:c}},retryCount:0}},fromP2PCallEndReason:function(a){a=i[a];return(a=a)!=null?a:g.CALL_ENDED},toP2PCallEndReason:function(a){a=j[a];return(a=a)!=null?a:h.HANGUP_CALL}};var i=Object.freeze((c={},c[h.HANGUP_CALL]=g.HANGUP_CALL,c[h.IGNORE_CALL]=g.IGNORE_CALL,c[h.IN_ANOTHER_CALL]=g.IN_ANOTHER_CALL,c[h.ACCEPT_AFTER_HANGUP]=g.ACCEPT_AFTER_HANGUP,c[h.NO_ANSWER_TIMEOUT]=g.NO_ANSWER_TIMEOUT,c[h.INCOMING_TIMEOUT]=g.INCOMING_TIMEOUT,c[h.OTHER_INSTANCE_HANDLED]=g.OTHER_INSTANCE_HANDLED,c[h.SIGNALING_MESSAGE_FAILED]=g.SIGNALING_MESSAGE_FAILED,c[h.CONNECTION_DROPPED]=g.CONNECTION_DROPPED,c[h.CLIENT_INTERRUPTED]=g.CLIENT_INTERRUPTED,c[h.WEBRTC_ERROR]=g.WEBRTC_ERROR,c[h.CLIENT_ERROR]=g.CLIENT_ERROR,c[h.NO_PERMISSION]=g.NO_PERMISSION,c[h.OTHER_NOT_CAPABLE]=g.OTHER_NOT_CAPABLE,c[h.NO_UI_ERROR]=g.NO_UI_ERROR,c[h.UNSUPPORTED_VERSION]=g.UNSUPPORTED_VERSION,c[h.CALLER_NOT_VISIBLE]=g.CALLER_NOT_VISIBLE,c[h.CARRIER_BLOCKED]=g.CARRIER_BLOCKED,c[h.OTHER_CARRIER_BLOCKED]=g.OTHER_CARRIER_BLOCKED,c[h.CLIENT_ENCRYPTION_ERROR]=g.CLIENT_ENCRYPTION_ERROR,c)),j=Object.freeze((d={},d[g.HANGUP_CALL]=h.HANGUP_CALL,d[g.IGNORE_CALL]=h.IGNORE_CALL,d[g.IN_ANOTHER_CALL]=h.IN_ANOTHER_CALL,d[g.ACCEPT_AFTER_HANGUP]=h.ACCEPT_AFTER_HANGUP,d[g.NO_ANSWER_TIMEOUT]=h.NO_ANSWER_TIMEOUT,d[g.INCOMING_TIMEOUT]=h.INCOMING_TIMEOUT,d[g.OTHER_INSTANCE_HANDLED]=h.OTHER_INSTANCE_HANDLED,d[g.SIGNALING_MESSAGE_FAILED]=h.SIGNALING_MESSAGE_FAILED,d[g.CONNECTION_DROPPED]=h.CONNECTION_DROPPED,d[g.CLIENT_INTERRUPTED]=h.CLIENT_INTERRUPTED,d[g.WEBRTC_ERROR]=h.WEBRTC_ERROR,d[g.CLIENT_ERROR]=h.CLIENT_ERROR,d[g.NO_PERMISSION]=h.NO_PERMISSION,d[g.OTHER_NOT_CAPABLE]=h.OTHER_NOT_CAPABLE,d[g.NO_UI_ERROR]=h.NO_UI_ERROR,d[g.UNSUPPORTED_VERSION]=h.UNSUPPORTED_VERSION,d[g.CALLER_NOT_VISIBLE]=h.CALLER_NOT_VISIBLE,d[g.CARRIER_BLOCKED]=h.CARRIER_BLOCKED,d[g.OTHER_CARRIER_BLOCKED]=h.OTHER_CARRIER_BLOCKED,d[g.CLIENT_ENCRYPTION_ERROR]=h.CLIENT_ENCRYPTION_ERROR,d));e.exports=a}),null);
__d("ZenonP2PMessageTranslator",["errorCode","ZenonDismissReason","ZenonP2PMessageTypes","ZenonP2PTranslatorUtils","ZenonParticipantState","ZenonSignalingMessage"],(function(a,b,c,d,e,f,g){"use strict";var h=b("ZenonDismissReason").ZenonDismissReason,i=b("ZenonP2PMessageTypes").ZenonP2PSignalingPayloadType,j=b("ZenonParticipantState").ZenonParticipantState,k=0,l=3;a={toP2PMessage:function(a){var b=a.getHeader();a=a.getEvents();if(a.length===0)throw new Error("Unexpected Translation: called toP2PMessage with empty signaling events");switch(a[0].eventName){case"answerIntentRequest":return t(b);case"inviteResponse":if(a[0].status==="NOT_SUPPORTED")return r(b);else return q(b);case"terminateRequest":return s(b,a[0]);default:return null}},toSignalingMessage:function(a){switch(a.type){case i.OFFER:return m(a);case i.HANG_UP:return n(a);case i.OTHER_DISMISS:return o(a);case i.ICE_CANDIDATE:return p(a);default:return null}}};function m(a){var c=b("ZenonP2PTranslatorUtils").p2pMessageToSignalingMessageHeader(String(a.msg_id),a),d=[],e=a.escalation_conference_name,f=a.videoon,g=a.from;e={eventName:"inviteRequest",roomInfo:{name:e,context:{peerID:g,groupThreadID:null,serverInfoData:null}},inviterID:g,otherParticipants:[],isRemoteOfferer:!0,requestingVideo:f};d.push(e);f={eventName:"remoteSdpRequest",sdp:{sdp:a.sdp,type:"offer",version:0},mediaStates:{tracks:[],version:0},negotiateType:!1};d.push(f);e={eventName:"capabilitiesRequest",capabilities:{addParticipantEnabled:a.offer_escalation_support}};d.push(e);f=new Map([[g,j.CONNECTED]]);a={eventName:"participantUpdateRequest",participantStates:f,versionId:k};d.push(a);return new(b("ZenonSignalingMessage"))(c,d)}function n(a){var c=b("ZenonP2PTranslatorUtils").p2pMessageToSignalingMessageHeader(String(a.msg_id),a),d=[],e=a.reason;a=a.from;e={eventName:"terminateRequest",reason:b("ZenonP2PTranslatorUtils").fromP2PCallEndReason(e),shouldInformPeer:!0,fromJoinResponse:!1};d.push(e);e=new Map([[a,j.DISCONNECTED]]);a={eventName:"participantUpdateRequest",participantStates:e,versionId:l};d.push(a);return new(b("ZenonSignalingMessage"))(c,d)}function o(a){a=b("ZenonP2PTranslatorUtils").p2pMessageToSignalingMessageHeader(String(a.msg_id),a);var c=[],d={eventName:"terminateRequest",reason:h.OTHER_INSTANCE_HANDLED,shouldInformPeer:!0,fromJoinResponse:!1};c.push(d);return new(b("ZenonSignalingMessage"))(a,c)}function p(a){var c=b("ZenonP2PTranslatorUtils").p2pMessageToSignalingMessageHeader(String(a.msg_id),a),d=[],e=a.sdp,f=a.sdp_line_idx;a=a.sdp_mid;e={candidateSdpString:e,sdpMLineIndex:f,sdpMid:a};f={eventName:"iceCandidateRequest",iceCandidates:[e]};d.push(f);return new(b("ZenonSignalingMessage"))(c,d)}function q(a){if(a.signalingID===null)throw new Error("Unexpected P2P Translation: expected signalingID to not be null");return{type:"offer_ack",ack_id:parseInt(a.messageID,10),call_id:parseInt(a.signalingID,10),msg_id:parseInt(a.messageID,10)}}function r(a){if(a.signalingID===null)throw new Error("Unexpected P2P Translation: expected signalingID to not be null");return{type:"offer_nack",ack_id:parseInt(a.messageID,10),call_id:parseInt(a.signalingID,10),msg_id:parseInt(a.messageID,10),error_code:1356043}}function s(a,c){if(a.signalingID===null)throw new Error("Unexpected P2P Translation: expected signalingID to not be null");var d=parseInt(a.messageID,10);a=parseInt(a.signalingID,10);c=b("ZenonP2PTranslatorUtils").toP2PCallEndReason(c.reason);return{reason:c,call_id:a,msg_id:d,type:"hang_up",version:0}}function t(a){if(a.signalingID===null)throw new Error("Unexpected P2P Translation: expected signalingID to not be null");var b=parseInt(a.signalingID,10);a=parseInt(a.messageID,10);return{call_id:b,msg_id:a,type:"other_dismiss"}}e.exports=a}),null);
__d("ZenonP2PMessageValidator",["ZenonP2PMessageTypes"],(function(a,b,c,d,e,f){"use strict";var g=b("ZenonP2PMessageTypes").ZenonP2PSignalingPayloadType;a={validateAndTransformP2PMessage:function(a){a=h(a);if(a){var b=a.msg_type;switch(b){case g.OFFER:return j(a);case g.HANG_UP:return k(a);case g.ICE_CANDIDATE:return i(a);case g.OTHER_DISMISS:return l(a)}}return null}};function h(a){a=JSON.parse(a);var b=a.from,c=a.call_id,d=a.id,e=a.msg_type,f=a.payload,g=a.source;a=a.type;if(b&&c&&f){c={call_id:c,from:b,id:d,msg_type:e,payload:f,source:g,type:a};return c}else throw Error("P2P message does not have valid from, call_id, and payload fields")}function i(a){var b=a.payload,c=a.from;a=a.source;b=JSON.parse(b);var d=b.call_id,e=b.capability,f=b.label,h=b.msg_id,i=b.version,j=b.sdp,k=b.sdp_line_idx;b=b.sdp_mid;c={from:c,source:a,call_id:d,capability:e,label:f,msg_id:h,sdp:j,sdp_line_idx:k,sdp_mid:b,type:g.ICE_CANDIDATE,version:i};return c}function j(a){var b,c,d,e,f=a.payload,h=a.from;a=a.source;f=JSON.parse(f);var i=f.call_id,j=f.calltype,k=f.capability;b=(b=f.escalation_conference_name)!=null?b:null;c=(c=f.experiments)!=null?c:[];d=(d=f.extraParams)!=null?d:[];e=(e=f.fbexp)!=null?e:"";var l=f.handlescollision!==void 0?f.handlescollision:!1,m=f.offer_escalation_support!==void 0?f.offer_escalation_support:!1,n=f.msg_id,o=f.sdp;f=f.videoon;i={call_id:i,calltype:j,capability:k,escalation_conference_name:b,experiments:c,extraParams:d,fbexp:e,from:h,handlescollision:l,msg_id:n,sdp:o,source:a,offer_escalation_support:m,type:g.OFFER,videoon:f};return i}function k(a){var b=a.payload,c=a.from;a=a.source;b=JSON.parse(b);var d=b.call_id,e=b.capability,f=b.reason,h=b.msg_id;b=b.subreason;d={call_id:d,capability:e,from:c,msg_id:h,reason:f,subreason:b,source:a,type:g.HANG_UP};return d}function l(a){var b=a.payload,c=a.from;a=a.source;b=JSON.parse(b);var d=b.call_id,e=b.capability;b=b.msg_id;d={call_id:d,capability:e,from:c,msg_id:b,source:a,type:g.OTHER_DISMISS};return d}e.exports=a}),null);
__d("RTWebSignalingListener",["FBMqttChannel","ZenonDebugLogger","ZenonMWMessageTranslator","ZenonP2PMessageTranslator","ZenonP2PMessageValidator","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var c=a.prototype;c.subscribe=function(a,c,d){var e=this;b("FBMqttChannel").subscribe("/webrtc",function(d){var f=b("ZenonP2PMessageValidator").validateAndTransformP2PMessage(d);e.$1(d,c);if(f){d=b("ZenonP2PMessageTranslator").toSignalingMessage(f);d&&a(d)}});b("FBMqttChannel").subscribe("/rtc_multi",function(c){var f=JSON.parse(c);b("ZenonDebugLogger").getInstance().logMWMessage("RECEIVED [MQTT]",f);f=b("ZenonMWMessageTranslator").toSignalingMessage(f);f&&(a(f),d&&e.$2(c,d))})};c.unsubscribe=function(){b("FBMqttChannel").unsubscribeAll("/webrtc"),b("FBMqttChannel").unsubscribeAll("/rtc_multi")};c.$1=function(a,c){try{a=JSON.parse(a);c(a)}catch(a){b("recoverableViolation")("Signaling messages should be json parsable. error:"+a,"rtweb")}};c.$2=function(a,c){try{a=JSON.parse(a);c(a)}catch(a){b("recoverableViolation")("Signaling messages should be json parsable. error:"+a,"rtweb")}};return a}();e.exports=a}),null);
__d("MercuryIgnoredBlockedParticipants.re",["bs_curry","MercuryIgnoredBlockedParticipants.bs"],(function(a,b,c,d,e,f){a=function(a,c,d){a=b("bs_curry")._3(b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs,a,c,d);return a};f.qualifiesAs=a;c=function(a,c,d){a=b("bs_curry")._3(b("MercuryIgnoredBlockedParticipants.bs").shouldShowBlock,a,c,d);return a};f.shouldShowBlock=c}),null);
__d("MessengerGroupUtils.bs",["MessengerView","SearchableEntry","MessengerActions","MessengerComposerActions"],(function(a,b,c,d,e,f){"use strict";function a(a,c){a=a.filter(function(a,b,d){if(a==null)return!1;else return a.fbid!==c});a.forEach(function(a,c,d){c={uniqueID:a.fbid,title:a.name,auxiliaryData:0};d=new(b("SearchableEntry"))(c);b("MessengerComposerActions").addToken(d);return 0});b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE);return 0}f.createGroupThread=a}),null);
__d("MessengerGroupUtils.re",["bs_curry","MessengerGroupUtils.bs"],(function(a,b,c,d,e,f){a=function(a,c){a=b("bs_curry")._2(b("MessengerGroupUtils.bs").createGroupThread,a,c);return a};f.createGroupThread=a}),null);
__d("WorkForeignEntityInfo.re",["WorkForeignEntityInfo.bs"],(function(a,b,c,d,e,f){a=b("WorkForeignEntityInfo.bs").isCoworker;f.isCoworker=a;c=b("WorkForeignEntityInfo.bs").areAllCoworkers;f.areAllCoworkers=c}),null);
__d("WIGFileSelector.react",["CometFileSelector.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){return g.jsx(b("CometFileSelector.react"),babelHelpers["extends"]({},a))}e.exports=a}),null);
__d("WIGFRX.entrypoint",["CometFRXQuery$Parameters","JSResource"],(function(a,b,c,d,e,f){"use strict";a={getPreloadProps:function(a){var c=a.entryPoint,d=a.id,e=a.location;a=a.responsible_id;return{queries:{frx:{parameters:b("CometFRXQuery$Parameters"),variables:{input:{entry_point:c,id:d,location:e,responsible_id:a}}}}}},root:b("JSResource")("WIGFRX.react").__setRef("WIGFRX.entrypoint")};e.exports=a}),null);
__d("useWIGEntryPointDialog",["useCometEntryPointDialog"],(function(a,b,c,d,e,f){"use strict";a=b("useCometEntryPointDialog");e.exports=a}),null);
__d("WorkGalahadAsyncStatefulActionHelper",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React");var g=a.useReducer;function h(a,b){switch(b.type){case"reset":return{loading:!1,requested:!1,error:null};case"startAction":return babelHelpers["extends"]({},a,{loading:!0,error:null});case"actionSuccess":return babelHelpers["extends"]({},a,{loading:!1,requested:!0});case"actionFailed":return babelHelpers["extends"]({},a,{loading:!1,requested:!0,error:b.error});default:return a}}c={useAsyncActionReducer:function(){var a=g(h,{loading:!1,requested:!1,error:null}),b=a[0],c=b.error,d=b.loading;b=b.requested;a=a[1];var e=!d&&b&&c==null,f=!d&&b&&c!=null;return[{loading:d,requested:b,error:c,isSuccessful:e,isFailed:f},a]}};e.exports=c}),null);
__d("WorkGalahadBlockChatDropdownMenuItem.react",["fbt","CurrentUser","JSResource","MercuryThreadActions","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("JSResource")("WorkGalahadConfirmBlockThreadDialog.react").__setRef("WorkGalahadBlockChatDropdownMenuItem.react");function a(a){var c=a.isBlocked,d=a.thread;a=b("useWIGLazyDialog")(i);var e=a[0];return h.jsx(b("WIGDropdownMenuItem.react"),{id:"block-chat",icons:"friend_block",label:c?g._("I-unblock ang Mga Mensahe?"):g._("I-block ang mga Message"),onClick:function(){c?b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).unblockOnMessengerDotCom(d.thread_id):e({thread:d})}})}e.exports=a}),null);
__d("WorkGalahadChangeChatEmojiDropdownMenuItem.react",["fbt","JSResource","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=a.thread;a=b("useWIGLazyDialog")(b("JSResource")("WorkGalahadChangeEmojiDialog.react").__setRef("WorkGalahadChangeChatEmojiDropdownMenuItem.react"));var d=a[0];return h.jsx(b("WIGDropdownMenuItem.react"),{id:"change-chat-emoji",icons:"emoji",label:g._("Baguhin ang Emoji"),onClick:function(){d({thread:c})}})}e.exports=a}),null);
__d("WorkGalahadDropdownMenuDataContext",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=a.createContext({width:null,parentMenuId:null,activeMenu:null,prevActiveMenu:null,menus:{},registerSubmenu:function(){},navigateTo:function(){},hideMenu:function(){},refreshHeight:function(){},submenuRefs:{}});e.exports=c}),null);
__d("WorkGalahadDropdownMenuVersionContext",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=a.createContext(!1);e.exports=c}),null);
__d("WorkGalahadDropdownSubmenuContainerContext",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=a.createContext(null);e.exports=c}),null);
__d("WorkGalahadDropdownMenuContent.react",["cx","fbt","FlexLayout.react","Link.react","Locale","React","ReactDOMComet","WorkGalahadDropdownMenuDataContext","WorkGalahadDropdownMenuItem.react","WorkGalahadDropdownMenuVersionContext","WorkGalahadDropdownSubmenuContainerContext"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");d=b("React");var j=d.useCallback,k=d.useContext,l=d.useEffect,m=d.useMemo,n=d.useRef,o=d.useState,p=b("ReactDOMComet").createPortal,q="@@root";function a(a){var c=a.items;a.label;var d=a.navigateToRootOnHide,e=a.onClose,f=a.shown,g=a.width,h=n({});a=n(null);var k=o(0),p=k[0],s=k[1];k=o(q);var t=k[0],u=k[1];k=o("");var v=k[0],w=k[1];k=o((k={},k[q]=null,k));var x=k[0],y=k[1],z=j(function(a,b){if(x[a]==null){var c;y(babelHelpers["extends"]({},x,(c={},c[a]=b,c)))}},[x]),A=j(function(a){a=a!=null?a:t;a=h.current[a]&&h.current[a].scrollHeight;a>0&&a!==p&&s(a)},[t,p,s]),B=j(function(a){w(t),u(a),A(a)},[t,u,w,A]);k=m(function(){return{width:g,parentMenuId:null,activeMenu:t,prevActiveMenu:v,menus:x,registerSubmenu:z,navigateTo:B,hideMenu:e,refreshHeight:A,submenuRefs:h.current}},[g,t,v,x,z,B,e,A]);l(function(){f&&A(),d===!0&&!f&&B(q)},[f,c,A,B,d]);var C=Object.keys(x).map(function(a){var b=t===a,d=b?g:0;return i.jsx("div",{ref:function(b){h.current[a]!==b&&b!=null&&(h.current[a]=b,A())},style:{width:d},className:"_74li"+(b?"":" _74lj"),children:a===q?i.jsx(r,{menuId:q,items:c}):null},a)});return i.jsx("div",{className:"_74lf",style:{height:p>0?p:"auto"},children:i.jsx(b("WorkGalahadDropdownMenuDataContext").Provider,{value:k,children:i.jsx(b("WorkGalahadDropdownSubmenuContainerContext").Provider,{value:a.current,children:i.jsx(b("FlexLayout.react"),{direction:"horizontal",children:C})})})})}function r(a){var c=a.items,d=a.menuId,e=k(b("WorkGalahadDropdownMenuDataContext"));a=e.activeMenu;var f=e.menus,g=e.navigateTo,j=e.parentMenuId,l=e.prevActiveMenu,n=e.width,o=j!=null&&g!=null?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"_76gk",children:i.jsxs(b("Link.react"),{className:"_74lg",onClick:function(){g(j)},children:[i.jsx("div",{className:"_74lh"+(b("Locale").isRTL()?" _7hnl":"")}),h._("Bumalik")]})}),i.jsx(b("WorkGalahadDropdownMenuItem.react").Separator,{},"back-button-separator")]},"go-back-button"):null,p=a===d;a=l!=null&&a===f[l];f=p&&a&&!b("Locale").isRTL()||!p&&!a&&!b("Locale").isRTL()?"right":"left";l=m(function(){return babelHelpers["extends"]({},e,{parentMenuId:d})},[e,d]);return i.jsx("div",{style:{"float":f,width:n},children:i.jsx(b("WorkGalahadDropdownMenuDataContext").Provider,{value:l,children:i.jsxs(b("WorkGalahadDropdownMenuVersionContext").Provider,{value:!0,children:[o,c]})})},d)}function c(a){var c=a.items;a=a.menuId;var d=k(b("WorkGalahadDropdownMenuDataContext")),e=d.parentMenuId,f=d.registerSubmenu;d=d.submenuRefs;f!=null&&e!=null&&f(a,e);return d[a]==null?null:p(i.jsx(r,{items:c,menuId:a}),d[a])}a.Submenu=c;e.exports=a}),null);
__d("useWorkGalahadEventEmitter",["EventEmitter"],(function(a,b,c,d,e,f){"use strict";var g=new(b("EventEmitter"))();function a(a){var b=function(b){a.forEach(function(a){return g.addListener(a,b)})},c=function(){a.forEach(function(a){return g.emit(a)})};return[b,c]}e.exports=a}),null);
__d("WorkGalahadAmbientNUX.react",["React","XUIAmbientNUX.react","useWorkGalahadEventEmitter"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("React");var h=c.useEffect,i=c.useState;function a(a){var c=a.nuxData,d=i(a.shown),e=d[0],f=d[1];h(function(){e&&c.onShow},[e,c.onShow]);d=b("useWorkGalahadEventEmitter")([c.event]);var j=d[0];h(function(){j(function(){f(!0)})},[]);return g.jsx(b("XUIAmbientNUX.react"),{contextRef:a.contextRef,shown:e,onCloseButtonClick:c.onDismiss,position:"right",children:c.content})}e.exports=a}),null);
__d("WorkGalahadDropdownMenuItemIcon",["ix","asset"],(function(a,b,c,d,e,f,g){"use strict";a={badge_empty:{normal:g("1069559"),secondary:g("1069558"),hovered:g("1069557")},badge_star:{normal:g("1019001"),secondary:g("1019000"),hovered:g("1018990")},building_city:{normal:g("1018783"),secondary:g("1063489"),hovered:g("1063482")},checkmark_selected:{normal:g("801626"),secondary:g("801625"),hovered:g("730444")},checkmark_unselected:{normal:g("801645"),secondary:g("801645"),hovered:g("730444")},cross_circle:{normal:g("608935"),secondary:g("608935"),hovered:g("988342")},cross_circle_dark:{normal:g("1063503"),secondary:g("772312"),hovered:g("988342")},envelope:{normal:g("870156"),secondary:g("870155"),hovered:g("870142")},envelope_open:{normal:g("801653"),secondary:g("801652"),hovered:g("794296")},settings:{normal:g("801682"),secondary:g("801681"),hovered:g("794302")},bell_null:{normal:g("801618"),secondary:g("685151"),hovered:g("730428")},settings_filled:{normal:g("801682"),secondary:g("801681"),hovered:g("794302")},bell:{normal:g("801618"),secondary:g("685151"),hovered:g("730428")},bell_null_cross:{normal:g("801611"),secondary:g("685144"),hovered:g("730419")},news_feed:{normal:g("801666"),secondary:g("801665"),hovered:g("680711")},tag:{normal:g("801700"),secondary:g("801699"),hovered:g("680725")},pushpin:{normal:g("806384"),secondary:g("806383"),hovered:g("806373")},pushpin_slash:{normal:g("806364"),secondary:g("806363"),hovered:g("806361")},report:{normal:g("806407"),secondary:g("806406"),hovered:g("806399")},leave:{normal:g("806326"),secondary:g("806325"),hovered:g("806315")},leave_door:{normal:g("878278"),secondary:g("878277"),hovered:g("878270")},badge_admin:{normal:g("806201"),secondary:g("790553"),hovered:g("806194")},badge_moderator:{normal:g("806229"),secondary:g("806228"),hovered:g("806214")},line_chart:{normal:g("806349"),secondary:g("806348"),hovered:g("806341")},box:{normal:g("806257"),secondary:g("806256"),hovered:g("680618")},cross:{normal:g("528597"),secondary:g("772336"),hovered:g("879994")},friend_add:{normal:g("806303"),secondary:g("806302"),hovered:g("680677")},friend_confirm:{normal:g("1063516"),secondary:g("1063515"),hovered:g("680684")},friend_list:{normal:g("1063531"),secondary:g("1063530"),hovered:g("1063526")},friends:{normal:g("1063550"),secondary:g("1063549"),hovered:g("945222")},friends_plus:{normal:g("826182"),secondary:g("826181"),hovered:g("680691")},follow:{normal:g("806273"),secondary:g("806272"),hovered:g("679399")},unfollow:{normal:g("806426"),secondary:g("798813"),hovered:g("806421")},customize:{normal:g("819017"),secondary:g("819016"),hovered:g("819009")},text:{normal:g("819035"),secondary:g("819034"),hovered:g("819030")},photo:{normal:g("818996"),secondary:g("818995"),hovered:g("818988")},emoji:{normal:g("773375"),secondary:g("818938"),hovered:g("773368")},pencil:{normal:g("589253"),secondary:g("826263"),hovered:g("826254")},pencil_underline:{normal:g("818971"),secondary:g("818970"),hovered:g("818965")},color:{normal:g("818955"),secondary:g("818954"),hovered:g("818947")},trash:{normal:g("773387"),secondary:g("822714"),hovered:g("730263")},privacy:{normal:g("822703"),secondary:g("822702"),hovered:g("695368")},caution_octagon:{normal:g("822686"),secondary:g("822685"),hovered:g("822678")},hide:{normal:g("823983"),secondary:g("823982"),hovered:g("823975")},undo:{normal:g("911405"),secondary:g("854104"),hovered:g("854099")},confirmation:{normal:g("824945"),secondary:g("824944"),hovered:g("824934")},claim:{normal:g("824972"),secondary:g("824971"),hovered:g("824961")},download:{normal:g("826109"),secondary:g("826108"),hovered:g("826101")},friend_request:{normal:g("826163"),secondary:g("826162"),hovered:g("826152")},minus_circle:{normal:g("826241"),secondary:g("826240"),hovered:g("826230")},megaphone:{normal:g("826217"),secondary:g("826216"),hovered:g("826206")},envelope_send:{normal:g("826135"),secondary:g("826134"),hovered:g("826124")},upload:{normal:g("838811"),secondary:g("822617"),hovered:g("710277")},arrow_move:{normal:g("838804"),secondary:g("838803"),hovered:g("710258")},bookmark:{normal:g("848888"),secondary:g("848887"),hovered:g("834166")},bookmark_cross:{normal:g("989342"),secondary:g("1144193"),hovered:g("1144190")},list_bullet:{normal:g("878295"),secondary:g("878295"),hovered:g("875911")},language:{normal:g("878254"),secondary:g("878253"),hovered:g("878243")},moon:{normal:g("878319"),secondary:g("878318"),hovered:g("878308")},moon_filled:{normal:g("878307"),secondary:g("878306"),hovered:g("878308")},friend_block:{normal:g("890861"),secondary:g("890860"),hovered:g("890853")},square_corner_bottom_right_box:{normal:g("894025"),secondary:g("894024"),hovered:g("894022")},resize_down:{normal:g("528441"),secondary:g("910581"),hovered:g("910576")},resize_up:{normal:g("910600"),secondary:g("910599"),hovered:g("910592")},broom:{normal:g("1217974"),secondary:g("1217973"),hovered:g("1217969")},group:{normal:g("1063568"),secondary:g("1063567"),hovered:g("680698")},group_checkmark:{normal:g("924159"),secondary:g("924158"),hovered:g("924154")},group_arrow_right:{normal:g("1004043"),secondary:g("1004042"),hovered:g("1004044")},group_plus:{normal:g("1001650"),secondary:g("822573"),hovered:g("668838")},play_circle:{normal:g("950126"),secondary:g("950125"),hovered:g("950115")},stop:{normal:g("950150"),secondary:g("950149"),hovered:g("920410")},info_cursive:{normal:g("965093"),secondary:g("965092"),hovered:g("965094")},copy:{normal:g("971192"),secondary:g("971191"),hovered:g("971193")},workplace:{normal:g("971174"),secondary:g("971173"),hovered:g("665265")},magic_wand:{normal:g("974974"),secondary:g("974973"),hovered:g("974966")},slash_circle:{normal:g("972069"),secondary:g("972068"),hovered:g("972061")},documents:{normal:g("998931"),secondary:g("822538"),hovered:g("822533")},direct:{normal:g("1001325"),secondary:g("1001324"),hovered:g("981982")},friend_edit:{normal:g("1001338"),secondary:g("988395"),hovered:g("1001333")},friend_remove:{normal:g("1001357"),secondary:g("1001356"),hovered:g("1001349")},import_export:{normal:g("1001973"),secondary:g("826189"),hovered:g("826190")},link:{normal:g("1010718"),secondary:g("822584"),hovered:g("822579")},privacy_unlocked:{normal:g("1032080"),secondary:g("1032079"),hovered:g("1032072")},briefcase:{normal:g("1032056"),secondary:g("1032055"),hovered:g("1032045")},folder:{normal:g("1067898"),secondary:g("822563"),hovered:g("822558")},caution:{normal:g("1072191"),secondary:g("1072190"),hovered:g("680633")},post:{normal:g("1079048"),secondary:g("1079047"),hovered:g("1079040")},life_preserver:{normal:g("1098116"),secondary:g("1098115"),hovered:g("1098108")},bulb:{normal:g("1109712"),secondary:g("1109711"),hovered:g("1109701")},star:{normal:g("1209598"),secondary:g("972090"),hovered:g("972079")},star_slash:{normal:g("1209588"),secondary:g("1209587"),hovered:g("1209582")},plus_circle:{normal:g("1103282"),secondary:g("772370"),hovered:g("1103275")},arrow_curved_right:{normal:g("1144180"),secondary:g("1144179"),hovered:g("1144175")},alarm_clock:{normal:g("1144162"),secondary:g("1144161"),hovered:g("1144154")},messages_compose:{normal:g("971853"),secondary:g("971852"),hovered:g("971845")},desktop_feed:{normal:g("1181340"),secondary:g("1181339"),hovered:g("1181335")},account_switch:{normal:g("1219996"),secondary:g("1219995"),hovered:g("1219988")},workplace_chat:{normal:g("1226793"),secondary:g("688834"),hovered:g("822621")},comment:{normal:g("530689"),secondary:g("1295024"),hovered:g("680654")},comment_slash:{normal:g("1295010"),secondary:g("1295009"),hovered:g("1295008")},bar_chart:{normal:g("1410919"),secondary:g("1410918"),hovered:g("1410840")}};e.exports=a}),null);
__d("WorkGalahadHoverableImage.react",["Image.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.className,d=a.hovered,e=a.icons;a=a.selected;var f=e.normal;a?f=e.selected!=null?e.selected:f:d&&(f=e.hovered!=null?e.hovered:f);return g.jsx(b("Image.react"),{className:c,src:f})}e.exports=a}),null);
__d("WorkGalahadDropdownMenuItem.react",["ix","cx","Image.react","Link.react","Locale","React","WIGDropdownMenuItem.react","WorkGalahadAmbientNUX.react","WorkGalahadDropdownMenu__DEPRECATED.react","WorkGalahadDropdownMenuDataContext","WorkGalahadDropdownMenuItemIcon","WorkGalahadDropdownMenuVersionContext","WorkGalahadHoverableImage.react","WorkGalahadHoverHelper","XUISpinner.react","XUIText.react","asset","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");f=b("React");var j=f.useContext,k=f.useRef,l=f.useState,m=b("WorkGalahadHoverHelper").useHover;function a(a){var c=j(b("WorkGalahadDropdownMenuDataContext")),d=m(),e=d[0];d=d[1];var f=k(null),h=l(!1),n=h[0],o=h[1];h=j(b("WorkGalahadDropdownMenuVersionContext"));if(!h)return i.jsx(b("WIGDropdownMenuItem.react"),babelHelpers["extends"]({},a));h=a.LinkRenderer;var p=a.ajaxify,q=a.desc,r=a.hideOnClick,s=r===void 0?!0:r;r=a.href;var t=a.icons,u=a.id,v=a.isDisabled;v=v===void 0?!1:v;var w=a.isLoading;w=w===void 0?!1:w;var x=a.isStatic;x=x===void 0?!1:x;var y=a.items,z=a.label,A=a.navigateBackOnClick,B=A===void 0?!1:A,C=a.nux,D=a.onClick;A=a.rel;var E=a.target;a=a.testid;a=z!=null;var F=q!=null,G=t!=null,H=a&&!F,I=y!=null&&y.length>0,J=!(w||x||v),K=null;t!=null&&(K=b("WorkGalahadDropdownMenuItemIcon")[t]);var L=b("Locale").isRTL()?g("801596"):g("685180");h=(h=h)!=null?h:function(a){var b=a.children;a.hovered;return b};var M=t==="checkmark_selected"||t==="checkmark_unselected"?{role:"checkbox","aria-checked":t==="checkmark_selected"}:void 0;return i.jsxs(i.Fragment,{children:[i.jsx("div",babelHelpers["extends"]({className:"_74ll","data-testid":void 0},d,{children:h({hovered:e,children:i.jsxs(b("Link.react"),babelHelpers["extends"]({},M,{className:"_78g3"+(I?" _74lm":"")+(J?"":" _74ln")+(w?" _7id9":"")+" _21op",href:J?r:void 0,target:E,onClick:function(a){if(J){C!=null&&n&&o(!1);var b=c.hideMenu,d=c.navigateTo,e=c.prevActiveMenu;D&&D(a);I&&d!=null&&u!=null?d(u):(B===!0&&d!=null&&e!=null&&d(e),s===!0&&b!=null&&b())}},ajaxify:J?p:void 0,rel:J?A:void 0,linkRef:function(a){return f.current=a},children:[a?i.jsxs("div",{className:"lenub8rc t36ehdhz oitujibm mu99tzkh",children:[i.jsx("div",{className:t!=null||w?"_74lo":"",children:w===!0?i.jsx(b("XUISpinner.react"),{size:"small"}):K!=null?i.jsx(b("WorkGalahadHoverableImage.react"),{icons:{normal:H?K.secondary:K.normal,hovered:K.hovered},hovered:x===!0?!1:e,selected:!1}):null}),i.jsx(b("XUIText.react"),{className:"_74lp"+(H?" _7d6w":"")+(v?" _8k97":"")+" _21op",display:"block",size:"body2",weight:F?"bold":void 0,children:typeof z==="function"?z({hovered:e}):z})]}):null,F?i.jsx(b("XUIText.react"),{className:"_74lq"+(a?" _7d6z":"")+(v?" _8k97":"")+(G?" _4m0t":""),display:"block",size:"body2",children:typeof q==="function"?q({hovered:e}):q}):null,e&&I?i.jsx("div",{className:"_74lr",children:i.jsx(b("Image.react"),{className:"_7vx_",src:L})}):null]}))})})),y!=null&&y.length>0?i.jsx(b("WorkGalahadDropdownMenu__DEPRECATED.react").Submenu,{menuId:u,items:y}):null,C!=null?i.jsx(b("WorkGalahadAmbientNUX.react"),{contextRef:function(){return f.current},shown:n,nuxData:C}):null]})}function c(){var a=j(b("WorkGalahadDropdownMenuVersionContext"));return!a?i.jsx(b("WIGDropdownMenuItem.react").Separator,{}):i.jsx("div",{className:"_74k2",children:i.jsx("div",{className:"_74k3"})})}function d(a){a=a.label;var c=m(),d=c[0];c=c[1];var e=j(b("WorkGalahadDropdownMenuVersionContext"));return!e?i.jsx(b("WIGDropdownMenuItem.react").Header,{label:a}):i.jsx("div",babelHelpers["extends"]({className:"_74k1"},c,{children:typeof a==="function"?a({hovered:d}):a}))}a.Separator=c;a.Header=d;e.exports=a}),null);
__d("WorkGalahadDropdownContextualDialog.react",["cx","AccessibleLayer","LayerHideOnBlur","LayerHideOnEscape","LayerTabIsolation","ReactAbstractContextualDialog","ReactLayer"],(function(a,b,c,d,e,f,g){"use strict";a=b("ReactLayer").createClass(b("ReactAbstractContextualDialog").createSpec({addedBehaviors:[b("AccessibleLayer"),b("LayerTabIsolation"),b("LayerHideOnBlur"),b("LayerHideOnEscape")],displayName:"WorkGalahadContextualDialog",theme:{wrapperClassName:"_76gj _53ii"}}));e.exports=a}),null);
__d("WorkGalahadDropdownMenuContext",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=a.createContext({forceClose:!1});e.exports=c}),null);
__d("WorkGalahadDropdownMenu__DEPRECATED.react",["ContextualDialogNoArrow","ContextualLayerAutoFlip","React","WorkGalahadDropdownContextualDialog.react","WorkGalahadDropdownMenuContent.react","WorkGalahadDropdownMenuContext"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("React");var h=c.useCallback,i=c.useContext;function a(a){var c=a.width;c=c===void 0?300:c;var d=a.alignment,e=a.contextRef,f=a.onToggle,j=a.shown,k=a.label,l=a.position;l=l===void 0?"below":l;var m=a.items,n=a.offsetX,o=a.offsetY,p=a.navigateToRootOnHide;a=a.contextualLayerBehaviours;a=a===void 0?{ContextualLayerAutoFlip:b("ContextualLayerAutoFlip")}:a;var q=h(function(a){f!=null&&f(a)},[f]),r=i(b("WorkGalahadDropdownMenuContext"));r=r.forceClose;var s=6,t=l==="above"?-6:6;return g.jsx(b("WorkGalahadDropdownContextualDialog.react"),{arrowBehavior:b("ContextualDialogNoArrow"),alignment:d,autoFocus:!1,behaviors:a,hideOnBlur:!0,contextRef:e,onToggle:q,shown:j&&!r,position:l,width:c,offsetX:n!=null?n:s,offsetY:o!=null?o:t,label:k,children:g.jsx(b("WorkGalahadDropdownMenuContent.react"),{width:c,shown:j,label:k,items:m,navigateToRootOnHide:p,onClose:function(){return q(!1)}})})}a.Submenu=b("WorkGalahadDropdownMenuContent.react").Submenu;e.exports=a}),null);
__d("WorkGalahadChangeChatPhotoMenuItem.react",["fbt","AsyncRequest","FileInputUploader","LayerFadeOnHide","MercuryConfig","MercuryIDs","React","WIGFileSelector.react","WorkGalahadAsyncStatefulActionHelper","WorkGalahadDropdownMenuItem.react","XMessagingSetThreadImageController","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogOkayButton.react","XUIDialogTitle.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");c=b("React");var i=c.useCallback,j=b("WorkGalahadAsyncStatefulActionHelper").useAsyncActionReducer;function a(a){var c=a.desc,d=a.icons,e=a.label,f=a.threadID;a=j();var l=a[0],m=l.error,n=l.isFailed;l=l.loading;var o=a[1],p=i(function(){o({type:"actionFailed",error:g._("There was an error in the uploading process.")})},[]),q=i(function(a,c){a=c.response.payload;a=(c=a.metadata[0])==null?void 0:c.image_id;if(!a)return;c=b("XMessagingSetThreadImageController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({thread_id:b("MercuryIDs").getThreadFBIDFromThreadID(f),thread_image_id:a}).setHandler(function(){o({type:"actionSuccess"})}).setErrorHandler(function(a){p()}).send()},[f]),r=i(function(a){a=a[0];if(!a)return;o({type:"startAction"});a=new(b("FileInputUploader"))().setFiles({file:a}).setURI(b("MercuryConfig").upload_url).setAllowCrossOrigin(!0).setAllowCrossPageTransition(!0).setData({images_only:!0});a.subscribe("success",q);a.subscribe("failure",p);a.send()},[f,q,p]),s=null;a=function(a){var c=a.children;return h.jsxs(h.Fragment,{children:[h.jsx(b("WIGFileSelector.react"),{onFilesSelected:r,accept:["image/*"],children:function(a){s=a;return c}}),h.jsx(k,{shown:n,onHide:function(){o({type:"reset"})},description:m})]})};return h.jsx(b("WorkGalahadDropdownMenuItem.react"),{id:"chat-photo-upload",LinkRenderer:a,label:e,icons:d,desc:c,isLoading:l,hideOnClick:!1,onClick:function(){s&&s()}})}function k(a){var c=a.description,d=a.onHide;a=a.shown;return h.jsxs(b("XUIDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},isStrictlyControlled:!0,onHide:d,shown:a,width:400,children:[h.jsx(b("XUIDialogTitle.react"),{children:g._("Failed to change group photo")}),h.jsx(b("XUIDialogBody.react"),{children:c}),h.jsx(b("XUIDialogFooter.react"),{children:h.jsx(b("XUIDialogOkayButton.react"),{use:"confirm",action:"cancel"})})]})}e.exports=a}),null);
__d("WorkGalahadCreateGroupFromChatMenuItem.react",["fbt","JSResource","MessengerParticipants.re","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("JSResource")("WorkGalahadCreateGroupFromChatDialog.react").__setRef("WorkGalahadCreateGroupFromChatMenuItem.react");function a(a){var c=a.thread;a=b("useWIGLazyDialog")(i);var d=a[0];return h.jsx(b("WIGDropdownMenuItem.react"),{id:"create-group",icons:"group_plus",label:g._("Create Group"),onClick:function(){d({onClose:function(){},thread:c,participants:c.participants.map(b("MessengerParticipants.re").getNow).filter(Boolean)})}},"create-group")}e.exports=a}),null);
__d("WorkGalahadDeleteChatMenuItem.react",["fbt","JSResource","MessagingTag","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("JSResource")("WorkGalahadDeleteChatHistoryDialog.react").__setRef("WorkGalahadDeleteChatMenuItem.react"),j=b("JSResource")("WorkGalahadHideChatDialog.react").__setRef("WorkGalahadDeleteChatMenuItem.react"),k=function(a){var c=a.showDescription,d=a.showHideButton,e=a.thread;a=b("useWIGLazyDialog")(i);var f=a[0];a={label:g._("Delete Message History"),desc:g._("Delete your copy of this chat and all of the messages within it."),onClick:function(){f({showHideButton:d,thread:e,onClose:function(){}})}};if(!c){delete a.desc;return h.jsx(b("WIGDropdownMenuItem.react"),babelHelpers["extends"]({id:"delete-chat-history",icons:"trash"},a))}return h.jsx(b("WIGDropdownMenuItem.react"),babelHelpers["extends"]({id:"delete-chat-history"},a))},l=function(a){var c=a.thread;a=b("useWIGLazyDialog")(j);var d=a[0];return h.jsx(b("WIGDropdownMenuItem.react"),{id:"hide-chat-permanently",label:g._("Permanenteng Itago"),desc:g._("This chat will move to 'Permanently Hidden'. It will stay there until you unhide it."),onClick:function(){d({thread:c,onClose:function(){}})}})};function a(a){a=a.thread;var c=a.folder===b("MessagingTag").OTHER;if(!a.is_subscribed||a.is_archived||c)return h.jsx(k,{showHideButton:!1,showDescription:!1,thread:a});var d=[];c||d.push(h.jsx(l,{thread:a},"hide-chat-permanently"));d.push(h.jsx(k,{showHideButton:!0,showDescription:!0,thread:a},"delete-chat-history"));return h.jsx(b("WIGDropdownMenuItem.react"),{id:"remove-chat",icons:"trash",label:g._("Remove Chat"),items:d},"remove-chat")}e.exports=a}),null);
__d("WorkGalahadDropdownMenuHelper",["React","WIGDropdownMenuItem.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a={createItemsFromSections:function(a,c){c===void 0&&(c="separator");return a.reduce(function(a,d){if(d.length===0)return a;if(a.length===0)return d;var e=a.length;return[].concat(a,[g.jsx(b("WIGDropdownMenuItem.react").Separator,{},c+"-"+e)],d)},[])}};e.exports=a}),null);
__d("WorkGalahadEditChatColorDropdownMenuItem.react",["fbt","JSResource","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=a.thread;a=b("useWIGLazyDialog")(b("JSResource")("WorkGalahadChangeColourDialog.react").__setRef("WorkGalahadEditChatColorDropdownMenuItem.react"));var d=a[0];return h.jsx(b("WIGDropdownMenuItem.react"),{id:"edit-chat-color",icons:"color",label:g._("Baguhin ang Kulay"),onClick:function(){d({thread:c})}},"edit-chat-color")}e.exports=a}),null);
__d("WorkGalahadEditChatNameDropdownMenuItem.react",["fbt","JSResource","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("JSResource")("WorkGalahadRenameChatThreadDialog.react").__setRef("WorkGalahadEditChatNameDropdownMenuItem.react");function a(a){var c=a.onSave,d=a.previousThreadName;a=b("useWIGLazyDialog")(i);var e=a[0];return h.jsx(b("WIGDropdownMenuItem.react"),{id:"rename-chat",icons:"text",label:g._("Rename Chat"),hideOnClick:!1,onClick:function(){e({onSave:c,previousThreadName:d})}},"rename-chat")}e.exports=a}),null);
__d("WorkGalahadEditChatNicknamesDropdownMenuItem.react",["fbt","CurrentUser","JSResource","MercuryThreadActions","MercuryThreadInfo","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("JSResource")("MWChatChangeNicknameDialog").__setRef("WorkGalahadEditChatNicknamesDropdownMenuItem.react");function a(a){var c=a.thread,d=babelHelpers.objectWithoutPropertiesLoose(a,["thread"]);a=b("useWIGLazyDialog")(i);var e=a[0];a=a[1];return h.jsx("div",{ref:a,children:h.jsx(b("WIGDropdownMenuItem.react"),{id:"edit-chat-nicknames",icons:"pencil_underline",label:g._("Edit Nicknames"),onClick:function(){var a;e(babelHelpers["extends"]({},d,{nicknames:(a=c.custom_nickname)!=null?a:{},onNicknameChange:function(a,d){b("MercuryThreadInfo").isEmptyLocalThread(c)||b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).changeThreadNicknames(c.thread_id,a,d,"thread_settings")}}))}},"edit-chat-nicknames")})}e.exports=a}),null);
__d("useWorkGalahadChatReportDialog",["requireCond","cr:1373380","MercuryIDs","MercuryThreadIDMap","cr:1373381","WIGFRX.entrypoint","useWIGEntryPointDialog"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d;c==null?d=b("MercuryIDs").getUserIDFromThreadID(a.thread_id):d=b("MercuryIDs").isLocalThread(a.thread_id)?b("MercuryThreadIDMap").get().getServerIDFromClientIDNow(a.thread_id):b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id);d=btoa("message_thread:"+((d=d)!=null?d:""));d=b("useWIGEntryPointDialog")(b("WIGFRX.entrypoint"),{entryPoint:"REPORT_BUTTON",id:d,responsible_id:c!=null?b("MercuryIDs").tokenize(c).value:void 0,location:"messenger_direct_thread_details"});var e=d[0];return b("cr:1373380")&&b("cr:1373381")?function(){c!=null?b("cr:1373380").FRXClicked(a.thread_id,!0,c):b("cr:1373381").bootloadFRXDialog(a.thread_id)}:function(){return e({})}}e.exports=a}),null);
__d("WorkGalahadReportChatMenuItem.react",["fbt","JSResource","React","WIGDropdownMenuItem.react","useWIGLazyDialog","useWorkGalahadChatReportDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("JSResource")("WorkGalahadReportChatParticipantDialog.react").__setRef("WorkGalahadReportChatMenuItem.react");function a(a){var c=a.thread;a=a.isSubtitleVisible;var d=b("useWIGLazyDialog")(i),e=d[0],f=b("useWorkGalahadChatReportDialog")(c);return h.jsx(b("WIGDropdownMenuItem.react"),{id:"report-chat",icons:"report",label:g._("Report Chat"),desc:a?g._("Give feedback and report something a person has shared in this chat"):null,onClick:function(){c.is_canonical?f():e({thread:c,onClose:function(){}})}})}e.exports=a}),null);
__d("WorkGalahadChatMenuHelper",["fbt","requireCond","Arbiter","CurrentUser","FollowButtonFollowMutation","FollowButtonUnfollowMutation","JSResource","MercuryIDs","MercuryIgnoredBlockedParticipants.re","MercuryThreadActions","MercuryThreadInfo","MessagingTag","MessengerActions","MessengerAdminGroupUtils","MessengerComposerActions","MessengerGroupUtils.re","MessengerParticipants.re","MessengerState.re","QPLUserFlow","QPLUtils","React","WIGDropdownMenuItem.react","WorkForeignEntityInfo.re","WorkGalahadBlockChatDropdownMenuItem.react","WorkGalahadChangeChatEmojiDropdownMenuItem.react","WorkGalahadChangeChatPhotoMenuItem.react","WorkGalahadCreateGroupFromChatMenuItem.react","WorkGalahadDeleteChatMenuItem.react","WorkGalahadDropdownMenuHelper","WorkGalahadEditChatColorDropdownMenuItem.react","WorkGalahadEditChatNameDropdownMenuItem.react","WorkGalahadEditChatNicknamesDropdownMenuItem.react","WorkGalahadReportChatMenuItem.react","cr:1278240","cr:1278241","formatDate","gkx","immutable","nullthrows","stylex","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("QPLUtils").deriveInstanceKey,j=b("React"),k=b("JSResource")("WorkGalahadLeaveThreadDialog.react").__setRef("WorkGalahadChatMenuHelper"),l=b("gkx")("1259767"),m={redLabel:{color:"eaqjevrq"},redLabelHovered:{color:"hk9qcz1a"}},n=3600,o={createMuteChatItems:function(a){var c=a==null?void 0:a.mute_until,d=g._("Mute chat"),e=g._("Pause notifications for messages"),f=o.isChatMuted(a);f&&(d=g._("Unmute chat"),e=function(a){a=a.hovered;return j.jsx("span",{className:(h||(h=b("stylex")))(m.redLabel,a&&m.redLabelHovered),children:c===-1?g._("Muted indefinitely"):g._("Muted until {date}",[g._param("date",b("formatDate")(c,{today:"g:ia",withinDay:"g:ia",thisYear:"M jS, g:ia",future:"M d, Y g:ia"}))])})});return f?[j.jsx(b("WIGDropdownMenuItem.react"),{id:"chat-notification",label:d,desc:e,icons:"bell_null",onClick:function(){return o.unmuteChat(a)}},"chat-notification")]:[j.jsx(b("WIGDropdownMenuItem.react"),{id:"chat-notification",label:d,desc:e,icons:"bell_null_cross",items:o.createChatMuteOptionsMenu(!0,function(b){o.muteChat(a,b)},a)},"chat-notification")]},isChatMuted:function(a){a=a==null?void 0:a.mute_until;return a!=null&&Number.isInteger(a)&&(a===-1||a*1e3>Date.now())},unmuteChat:function(a){if(a==null||!o.isChatMuted(a))return;b("MercuryThreadActions").getForFBID(b("CurrentUser").getID()).updateMuteSetting(a.thread_id,0)},muteChat:function(a,c){if(a==null)return;b("MercuryThreadActions").getForFBID(b("CurrentUser").getID()).updateMuteSetting(a.thread_id,c)},createGroupChatMuteExplanationItem:function(){return j.jsx(b("WIGDropdownMenuItem.react"),{id:"mention",label:g._("While muted, you'll still be notified about {\u0040mentions} in this chat.",[g._param("@mentions",j.jsx("strong",{children:"@mentions"}))]),isStatic:!0},"mention")},createChatMuteOptionsMenu:function(a,c,d){return[j.jsx(b("WIGDropdownMenuItem.react").Header,{label:g._("Mute this chat...")},"mute-chat-header")].concat(o.createChatMuteOptionItems(a,c)).concat(d!=null&&!d.is_canonical?[j.jsx(b("WIGDropdownMenuItem.react").Separator,{},"mute-chat-separator"),o.createGroupChatMuteExplanationItem()]:[])},createChatMuteOptionItems:function(a,c){var d;return[j.jsx(d=b("WIGDropdownMenuItem.react"),{id:"chat-mute-1-hour",label:g._("For 1 hour"),onClick:function(){c(n)},navigateBackOnClick:a},"chat-mute-1-hour"),j.jsx(d,{id:"chat-mute-2-hour",label:g._("For 2 hours"),onClick:function(){c(2*n)},navigateBackOnClick:a},"chat-mute-2-hour"),j.jsx(d,{id:"chat-mute-until-tomorrow",label:g._("Until tomorrow at 8 am"),onClick:function(){var a=new Date(),b=a.getHours()>=8;b&&a.setDate(a.getDate()+1);a.setHours(8,0,0,0);c(Math.ceil((a.getTime()-Date.now())/1e3))},navigateBackOnClick:a},"chat-mute-until-tomorrow"),j.jsx(d,{id:"chat-mute-next-week",label:g._("Until next week (Monday at 8 am)"),onClick:function(){var a=new Date();a.setDate(a.getDate()+(7-a.getDay())%7+1);a.setHours(8,0,0,0);c(Math.ceil((a.getTime()-Date.now())/1e3))},navigateBackOnClick:a},"chat-mute-next-week"),j.jsx(d,{id:"chat-mute-until-changed",label:g._("Until I change it"),onClick:function(){c(-1)},navigateBackOnClick:a},"chat-mute-until-changed")]},createCustomizeItems:function(a){var c=[];!a.is_canonical&&!a.work_associated_group&&(a.is_subscribed&&!a.is_canonical&&b("MessengerAdminGroupUtils").canUpdateThreadCustomization(a,b("CurrentUser").getAccountID())&&(b("gkx")("997564")||c.push(j.jsx(b("WorkGalahadEditChatNameDropdownMenuItem.react"),{previousThreadName:a.name,onSave:function(c){b("MercuryThreadInfo").isEmptyLocalThread(a)||b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).changeGroupThreadName(a.thread_id,c)}},"rename-chat")),c.push(j.jsx(b("WorkGalahadChangeChatPhotoMenuItem.react"),{icons:"photo",label:g._("Change Chat Photo"),threadID:a.thread_id},"change-chat-photo"),j.jsx(b("WIGDropdownMenuItem.react").Separator,{},"customize-options-separator"))));a.customization_enabled&&(c.push(j.jsx(b("WorkGalahadEditChatNicknamesDropdownMenuItem.react"),{thread:a,participants:b("immutable").OrderedMap(a.participants.reduce(function(a,c){return babelHelpers["extends"]({},a,(a={},a[c]=b("MessengerParticipants.re").getNow(c),a))},{})).toObject(),onClose:function(){}},"edit-chat-nicknames")),c.push(j.jsx(b("WorkGalahadEditChatColorDropdownMenuItem.react"),{thread:a},"edit-chat-color")),c.push(j.jsx(b("WorkGalahadChangeChatEmojiDropdownMenuItem.react"),{thread:a},"change-chat-emoji")));if(c.length===0)return[];var d=a.is_canonical||a.work_associated_group?g._("Edit emoji, nicknames and more"):g._("Edit chat name, photo and more");return[j.jsx(b("WIGDropdownMenuItem.react"),{id:"customize-chat",icons:"pencil",label:g._("Customize Chat"),desc:d,items:[j.jsx(b("WIGDropdownMenuItem.react").Header,{label:g._("Customize Chat")},"customize-chat-header")].concat(c)},"customize-chat")]},getOnHideChatCallback:function(a){return function(){var c;p((c=a.thread_fbid)!=null?c:"");c=b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID());a.is_pinned===!0&&c.unpin(a.thread_id);c.archive(a.thread_id);b("MessengerActions").selectThread(null)}},getOnUnhideChatCallback:function(a){return function(){var c=b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID());a.is_archived===!0&&c.unarchive(a.thread_id);a.folder===b("MessagingTag").OTHER&&c.changeFolder(a.thread_id,b("MessagingTag").INBOX);b("MessengerActions").selectThread(a.thread_id)}},createHideChatItems:function(a){var c=a.folder===b("MessagingTag").OTHER;if(!a.is_archived&&!c)return[j.jsx(b("WIGDropdownMenuItem.react"),{id:"hide-chat",label:l?g._("Archive"):g._("Itago ang Chat"),icons:l?"box":"hide",desc:l?null:g._("Hide this chat from your inbox"),onClick:this.getOnHideChatCallback(a)},"hide-chat")];else return[j.jsx(b("WIGDropdownMenuItem.react"),{id:"unhide-chat",label:l?g._("Alisin sa Archive"):g._("Unhide Chat"),icons:"undo",desc:l?null:g._("Show this chat in your inbox"),onClick:this.getOnUnhideChatCallback(a)},"unhide-chat")]},createRemoveChatItems:function(a){return[j.jsx(b("WorkGalahadDeleteChatMenuItem.react"),{thread:a},"delete-chat-wrapper")]},useBlockMessagesItems:function(a){var c=b("CurrentUser").getID(),d=!1;b("MessengerState.re").compute(c,function(e){e=e.blocked_ids;d=b("MercuryIgnoredBlockedParticipants.re").qualifiesAs(c,e,a)});var e=b("MercuryIDs").getParticipantIDFromFromThreadID(a.thread_id);e=e!=null?b("MessengerParticipants.re").getNow(e):null;if(e==null)return[];return!b("MercuryIgnoredBlockedParticipants.re").shouldShowBlock(a,c,e)?[]:[j.jsx(b("WorkGalahadBlockChatDropdownMenuItem.react"),{isBlocked:d,thread:a},"block-chat")]},createReportChatItems:function(a,c){var d=b("CurrentUser").getID();if(a.message_count===0||a.participants.length<=1)return[];return a.participants.map(function(a){return b("MessengerParticipants.re").getNow(a)}).find(function(a){return(a==null?void 0:a.id)!==b("MercuryIDs").getParticipantIDFromUserID(d)&&(a==null?void 0:a.user_type)!=="page"})==null?[]:[j.jsx(b("WorkGalahadReportChatMenuItem.react"),{thread:a,isSubtitleVisible:c},"report-chat")]},createChatPrivacySubMenuItems:function(a){if(a==null)return[];var c=a.other_user_fbid===b("CurrentUser").getID(),d=b("MercuryThreadInfo").isEmptyLocalThread(a),e=this.useBlockMessagesItems(a);if(!a.is_subscribed||c||d)return[];c=o.createReportChatItems(a,!0);return b("WorkGalahadDropdownMenuHelper").createItemsFromSections([[].concat(c),[].concat(e)])},createPrivacyItems:function(a){var c=o.createChatPrivacySubMenuItems(a);if(a==null)return[];if(c.length===0)return[];return c.length===1?o.createReportChatItems(a,!1):[j.jsx(b("WIGDropdownMenuItem.react"),{id:"privacy-chat-options",icons:"privacy",label:g._("Mga Opsyon sa Privacy"),items:[j.jsx(b("WIGDropdownMenuItem.react").Header,{id:"privacy-options-header",label:g._("Mga Opsyon sa Privacy")},"privacy-options-header")].concat(c)},"privacy-chat-options")]},createAddMembersItems:function(a){return b("cr:1278240")?[j.jsx(b("cr:1278240"),{thread:a},"add-members")]:[]},createPinOrUnpinItems:function(a){if(!a.is_pinned&&(!a.is_subscribed||a.message_count===0))return[];if(!a.is_pinned)return[j.jsx(b("WIGDropdownMenuItem.react"),{id:"pin-chat",icons:"pushpin",label:l?g._("Pin to Top"):g._("Pin Chat"),desc:l?null:g._("Pin this chat to the top of inbox"),onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).pin(a.thread_id,"menu_item_in_overflow_menu")}},"pin-unpin-chat")];else return[j.jsx(b("WIGDropdownMenuItem.react"),{id:"unpin-chat",icons:"pushpin_slash",label:l?g._("I-unpin"):g._("I-unpin ang Chat"),desc:l?null:g._("Unpin this chat in your inbox"),onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).unpin(a.thread_id,"menu_item_in_overflow_menu")}},"pin-unpin-chat")]},createFollowOrUnfollowItems:function(a,c){if(a.participants.length>2||a.other_user_fbid==null||!b("gkx")("997564"))return[];if(c==="CAN_SUBSCRIBE")return[j.jsx(b("WIGDropdownMenuItem.react"),{id:"follow",icons:"follow",label:g._("Follow in News Feed"),onClick:function(){b("FollowButtonFollowMutation").commit(b("nullthrows")(a.other_user_fbid),"PROFILE")}},"follow")];else if(c==="IS_SUBSCRIBED")return[j.jsx(b("WIGDropdownMenuItem.react"),{id:"unfollow",icons:"unfollow",label:g._("Unfollow in News Feed"),onClick:function(){b("FollowButtonUnfollowMutation").commit(b("nullthrows")(a.other_user_fbid),"PROFILE")}},"unfollow")];else return[]},createAdminOptionsItems:function(a){var c=b("MessengerAdminGroupUtils").isAdmin(a.admins,b("CurrentUser").getID());if(a.is_canonical||!c)return[];c=!b("MessengerAdminGroupUtils").isApprovalOpenThread(a);c=[j.jsx(b("WIGDropdownMenuItem.react").Header,{label:g._("Pag-apruba sa Membership")},"chat-admin-options-header"),j.jsx(b("WIGDropdownMenuItem.react").Radio,{id:"membership-approval-on",label:g._("Naka-on"),desc:g._("Admins can approve new people that are added by non-admins."),isChecked:c,onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).setApprovalMode(1,a)}},"membership-approval-on"),j.jsx(b("WIGDropdownMenuItem.react").Radio,{id:"membership-approval-off",label:g._("Naka-off"),desc:g._("Any member can add new people to the chat without approval."),isChecked:!c,onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).setApprovalMode(0,a)}},"membership-approval-off")];var d=b("immutable").OrderedMap(a.participants.reduce(function(a,c){return babelHelpers["extends"]({},a,(a={},a[c]=b("MessengerParticipants.re").getNow(c),a))},{}));d=!b("WorkForeignEntityInfo.re").areAllCoworkers(d);a.is_subscribed&&!a.work_associated_group&&!d&&(c.push(j.jsx(b("WIGDropdownMenuItem.react").Separator,{},"admin-create-group-option-separator")),c.push(j.jsx(b("WorkGalahadCreateGroupFromChatMenuItem.react"),{thread:a},"create-group")));return[j.jsx(b("WIGDropdownMenuItem.react"),{id:"chat-admin-options",icons:"badge_admin",label:g._("Admin Options"),items:c},"chat-admin-options")]},useCreateLeaveItems:function(a){var c=b("useWIGLazyDialog")(k),d=c[0];return a==null||a.is_canonical||!a.is_subscribed?[]:[j.jsx(b("WIGDropdownMenuItem.react"),{id:"leave-chat",icons:"leave",label:g._("Leave"),onClick:function(){d({thread:a})}},"leave-chat")]},createNewGroupChatItems:function(a){return!a.is_canonical_user&&a.thread_type===1?[]:[j.jsx(b("WIGDropdownMenuItem.react"),{id:"new-chat",icons:"messages_compose",label:g._("Gumawa ng Bagong Group Chat"),onClick:function(){var c=b("immutable").OrderedMap(a.participants.reduce(function(a,c){return babelHelpers["extends"]({},a,(a={},a[c]=b("MessengerParticipants.re").getNow(c),a))},{}));b("MessengerComposerActions").exitComposeStateAbandonSearch();b("MessengerGroupUtils.re").createGroupThread(c,b("CurrentUser").getID())}},"new-chat")]},createMarkAsReadOrUnreadItems:function(a){return a.unread_count>0?[j.jsx(b("WIGDropdownMenuItem.react"),{id:"mark-as-read",icons:"envelope_open",label:g._("Markahan bilang Nabasa"),onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getID()).markRead(a.thread_id)}},"mark-as-read-unread")]:[j.jsx(b("WIGDropdownMenuItem.react"),{id:"mark-as-unread",icons:"envelope",label:g._("Markahang Di Nabasa"),onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getID()).markUnread(a.thread_id)}},"mark-as-read-unread")]},createChatChannelOverflowMenuItems:function(a){if(l){var c;return b("WorkGalahadDropdownMenuHelper").createItemsFromSections([b("cr:1278241")?[j.jsx(b("cr:1278241"),{thread:a,groupID:(c=a.work_associated_group)==null?void 0:c.id,isMuted:a.mute_until!=null},"notification-options")]:null,[].concat(o.createPinOrUnpinItems(a),o.createMarkAsReadOrUnreadItems(a)),[].concat(o.createHideChatItems(a),o.useCreateLeaveItems(a))].filter(Boolean))}return b("WorkGalahadDropdownMenuHelper").createItemsFromSections([o.createPinOrUnpinItems(a),[].concat(o.createMuteChatItems(a),o.createHideChatItems(a)),[].concat(o.createMarkAsReadOrUnreadItems(a),o.createRemoveChatItems(a),o.useCreateLeaveItems(a))])}};function p(a){var c,d={instanceKey:i((c=a)!=null?c:"")};b("QPLUserFlow").start(57409537,d);var e=b("Arbiter").subscribe(["AsyncRequest/response","AsyncRequest/error","AsyncRequest/timeout"],function(c,f){var g=null;f=Object.keys((f=f==null?void 0:(f=f.request)==null?void 0:(f=f.data)==null?void 0:f.ids)!=null?f:{});Array.isArray(f)&&f.length>0&&(g=f[0]);if(a!==g)return;e.unsubscribe();c==="AsyncRequest/response"?b("QPLUserFlow").endSuccess(57409537,d):b("QPLUserFlow").endFailure(57409537,d)})}e.exports=o}),null);
__d("WorkGalahadChatChannelOverflowMenu.react",["React","WIGDropdownMenu.react","WorkGalahadChatMenuHelper"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.label;a=a.thread;return g.jsx(b("WIGDropdownMenu.react"),{items:b("WorkGalahadChatMenuHelper").createChatChannelOverflowMenuItems(a),label:c,width:280,offsetX:-12})}e.exports=g.memo(a)}),null);